"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[880],{20302:function(e,n,t){t.d(n,{JL:function(){return s},PH:function(){return i},Ze:function(){return l}});var r=t(93433),c=t(74165),o=t(15861);function s(){return a.apply(this,arguments)}function a(){return(a=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("https://invoicecollectionsystemapi.azurewebsites.net/customer",{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return u.apply(this,arguments)}function u(){return(u=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{id:"0",customerCode:"All",customerNameEn:"All",customerNameAr:"All"}],e.next=3,fetch("https://invoicecollectionsystemapi.azurewebsites.net/customer",{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n.push.apply(n,(0,r.Z)(e))})).catch((function(e){return console.log()}));case 3:return console.log("List: ".list),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return p.apply(this,arguments)}function p(){return(p=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("https://invoicecollectionsystemapi.azurewebsites.net/api/User/UsersNameByRole/sales",{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},91617:function(e,n,t){t.d(n,{Ag:function(){return f},DW:function(){return j},ES:function(){return p},G_:function(){return g},OX:function(){return v},ZN:function(){return Z},iJ:function(){return x},kT:function(){return m},m3:function(){return w},qL:function(){return a},zJ:function(){return u}});var r=t(74165),c=t(15861),o=(t(763),t(38072)),s="https://invoicecollectionsystemapi.azurewebsites.net";function a(){return i.apply(this,arguments)}function i(){return(i=(0,c.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(s,"/api/invoices"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return(l=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("".concat(s,"/api/Invoices/Department/").concat(n),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return(d=(0,c.Z)((0,r.Z)().mark((function e(n){var t,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],c="",c=n?"".concat(s,"/api/Invoices/GetInvoicesBySalesConfirmation?salesConfirm=").concat(n):"".concat(s,"/api/Invoices/NotConfirmedBySales"),e.next=5,fetch(c,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=(0,c.Z)((0,r.Z)().mark((function e(n){var t,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(s,"/api/invoices/").concat(n),{mode:"cors"});case 3:if(!(t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:console.error("Failed to fetch invoice: ".concat(t.status," - ").concat(t.statusText)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:return e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function m(e,n){var t="";switch(e){case-1:case 0:t="".concat(s,"/api/Invoices/").concat(n,"/Edit/Operation");break;case 1:t="".concat(s,"/api/Invoices/").concat(n,"/Edit/installation");break;case 2:t="".concat(s,"/api/Invoices/").concat(n,"/Edit/Sales");break;case 3:t="".concat(s,"/api/Invoices/").concat(n,"/Edit/Collection");break;case 4:t="".concat(s,"/api/Invoices/").concat(n,"/Edit/TenderAndContracts")}return t}function x(e){var n="";switch(e){case-1:case 0:n=o.H.departments.operation.list;break;case 1:n=o.H.departments.installation.list;break;case 2:n=o.H.departments.sales.list;break;case 3:n=o.H.departments.collection.list;break;case 4:n=o.H.departments.tenderAndConract.list}return n}function v(){return"".concat(s,"/api/ExcelImport/import-invoices")}function Z(e){return"".concat(s,"/api/Attachments/").concat(e)}function g(){return y.apply(this,arguments)}function y(){return(y=(0,c.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(s,"/api/CollectionData"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return b.apply(this,arguments)}function b(){return(b=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},console.log("".concat(s,"/api/Invoices/").concat(n,"/Inquiry")),e.next=4,fetch("".concat(s,"/api/Invoices/").concat(n,"/Inquiry"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return C.apply(this,arguments)}function C(){return(C=(0,c.Z)((0,r.Z)().mark((function e(n){var t,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n){e.next=3;break}return e.abrupt("return",t);case 3:return c=n.reduce((function(e,n){return"".concat(e,"customerIds=").concat(n,"&")}),""),e.next=6,fetch("".concat(s,"/api/Invoices/GetInvoicesForCustomers?").concat(c),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){console.log(e),t=[]}));case 6:return console.log("Result: ",t),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},90880:function(e,n,t){t.r(n),t.d(n,{default:function(){return $}});var r=t(6907),c=t(74165),o=t(15861),s=t(29439),a=t(72791),i=t(69931),u=t(13967),l=t(57621),p=t(79836),d=t(89164),f=t(53382),h=t(39281),m=t(38072),x=t(19208),v=t(47974),Z=t(60720),g=t(50933),y=t(4942),j=t(36314),b=t(5574),w=t(48550),C=t(4567),k=t(63466),I=t(76278),D=t(34065),S=t(27216),P=t(96349),A=t(80184);function E(e){var n=e.title,t=void 0===n?"Address Book":n,r=e.list,c=e.action,o=e.open,u=e.onClose,l=e.selected,p=e.onSelect,d=(0,a.useState)(""),f=(0,s.Z)(d,2),h=f[0],m=f[1],x=(0,a.useState)([""]),v=(0,s.Z)(x,2),Z=(v[0],v[1],function(e){var n=e.inputData,t=e.query;if(t)return n.filter((function(e){return-1!==e.customerCode.toLowerCase().indexOf(t.toLowerCase())||-1!==e.customerNameEn.toLowerCase().indexOf(t.toLowerCase())||-1!==e.customerNameAr.toLowerCase().indexOf(t.toLowerCase())}));return n}({inputData:r,query:h})),g=(0,i.nt)().t,E=function(e){return g(e)},N=!Z.length&&!!h,L=(0,a.useCallback)((function(e){m(e.target.value)}),[]),T=(0,a.useCallback)((function(e){p(e),m(""),u()}),[u,p]),_=(0,A.jsx)(j.Z,{spacing:.5,sx:{p:.5,maxHeight:640,overflowX:"hidden"},children:Z.map((function(e,n){return(0,A.jsxs)(j.Z,{spacing:.5,component:I.Z,selected:l("".concat(e.id)),onClick:function(){return T(e)},sx:(0,y.Z)({py:1,px:1.5,borderRadius:1,flexDirection:"column",alignItems:"flex-start"},"&.".concat(D.Z.selected),{bgcolor:"action.selected","&:hover":{bgcolor:"action.selected"}}),children:[(0,A.jsx)(j.Z,{direction:"row",alignItems:"center",spacing:1,children:(0,A.jsxs)(C.Z,{variant:"subtitle2",children:[E("code"),": ",e.customerCode]})}),(0,A.jsxs)(C.Z,{variant:"body2",sx:{color:"text.secondary"},children:[E("nameEnglish"),": ",e.customerNameEn]}),(0,A.jsxs)(C.Z,{variant:"body2",sx:{color:"text.secondary"},children:[E("nameArabic"),": ",e.customerNameAr]})]},n)}))});return(0,A.jsxs)(b.Z,{fullWidth:!0,maxWidth:"xs",open:o,onClose:u,children:[(0,A.jsx)(j.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:3,pr:1.5},children:(0,A.jsxs)(C.Z,{variant:"h6",children:[" ",t," "]})}),(0,A.jsx)(j.Z,{sx:{p:2,pt:0},children:(0,A.jsx)(w.Z,{value:h,onChange:L,placeholder:E("searchCustomer"),InputProps:{startAdornment:(0,A.jsx)(k.Z,{position:"start",children:(0,A.jsx)(S.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),N?(0,A.jsx)(P.Z,{query:h,sx:{px:3,pt:5,pb:10}}):_,c&&c]})}var N=t(20302),L=t(91617),T=t(1382),_=(t(91590),t(58406)),H=t(62861),z=t(77196),B=t(68096),O=t(82626),R=t(13034);function q(e){var n=e.onChange,t=e.customers,r=(e.handleOpen,e.selectedCustomers),c=(0,i.nt)().t;return(0,A.jsx)(j.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},justifyContent:"flex-end",direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:(0,A.jsxs)(B.Z,{sx:{flexShrink:0,width:{xs:1,md:180}},children:[(0,A.jsx)(H.Z,{children:"Customers List"}),(0,A.jsx)(_.Z,{multiple:!0,value:r,onChange:function(e){console.log(e.target.value),n(e.target.value)},input:(0,A.jsx)(z.Z,{label:"Customers List"}),renderValue:function(e){return e},sx:{textTransform:"capitalize"},children:t.map((function(e,n){return(0,A.jsxs)(O.Z,{value:e.id,selected:!0,children:[(0,A.jsx)(R.Z,{disableRipple:!0,size:"small",checked:r.includes(e.id)}),0===n?(t="all",c(t)):e.customerNameAr]},n);var t}))})]})})}var F=t(16386),W=t(9195),G=t(68745),J=t(60220),M=t(49900);function U(e){var n=e.row,t=e.selected,r=(e.isPercentage,n.id,n.invoiceNo,n.issueInvoiceDate),c=n.invoiceAmount,o=n.daysToCollected,s=n.customerNameEn,a=n.paidStatus,i=n.department;return(0,A.jsxs)(W.Z,{hover:!0,selected:t,children:[(0,A.jsxs)(G.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,A.jsx)(J.Z,{alt:s,sx:{mr:2},children:s.charAt(0).toUpperCase()}),(0,A.jsx)(M.Z,{disableTypography:!0,primary:(0,A.jsx)(C.Z,{variant:"body2",noWrap:!0,children:s})})]}),(0,A.jsx)(G.Z,{children:(0,A.jsx)(M.Z,{primary:(0,F.Z)(new Date(r),"dd MMM yyyy"),secondary:(0,F.Z)(new Date(r),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),(0,A.jsx)(G.Z,{children:o}),(0,A.jsxs)(G.Z,{children:["$",c]}),(0,A.jsx)(G.Z,{align:"center",children:a}),(0,A.jsx)(G.Z,{align:"center",children:i})]})}var K={name:"",startDate:null,endDate:null};function X(){(0,u.Z)();var e=(0,Z.K$)(),n=((0,x.tv)(),(0,i.nt)().t),t=function(e){return n(e)},r=(0,T.x6)({defaultOrderBy:"issueInvoiceDate"}),y=(0,a.useState)([]),j=(0,s.Z)(y,2),b=j[0],w=j[1],C=(0,a.useState)([]),k=(0,s.Z)(C,2),I=k[0],D=k[1],S=(0,a.useState)(""),P=(0,s.Z)(S,2),_=P[0],H=P[1],z=(0,a.useState)([]),B=(0,s.Z)(z,2),O=B[0],R=B[1],F=(0,a.useState)(!1),W=(0,s.Z)(F,2),G=W[0],J=W[1];(0,a.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,N.PH)();case 3:n=e.sent,console.log("Result: ",n),D(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,a.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,L.m3)(O);case 3:n=e.sent,w(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[O]);var M=(0,a.useState)(K),X=(0,s.Z)(M,2),$=X[0],Q=(X[1],!(!$.startDate||!$.endDate)&&$.startDate.getTime()>$.endDate.getTime()),V=function(e){var n=e.inputData;e.comparator,e.filters,e.dateError;return console.log(n),n}({inputData:b,comparator:(0,T.sQ)(r.order,r.orderBy),filters:$,dateError:Q}),Y=(r.dense,!!$.name||!!$.startDate&&!!$.endDate),ee=!V.length&&Y||!V.length,ne=[{id:"invoiceNumber",label:t("invoiceNumber")},{id:"issueInvoiceDate",label:t("issueInvoiceDate")},{id:"daysToCollected",label:t("daysToCollected")},{id:"invoiceAmount",label:t("invoiceAmount")},{id:"paidStatus",label:t("paidStatus"),align:"center"},{id:"department",label:t("department"),align:"center"}];return(0,A.jsxs)(d.Z,{maxWidth:!e.themeStretch&&"lg",children:[(0,A.jsx)(g.Z,{heading:t("invoicesForCustomer"),links:[{name:t("app"),href:m.H.dashboard.root},{name:t("reports")},{name:t("invoicesForCustomer")}],sx:{mb:{xs:3,md:5}}}),(0,A.jsxs)(l.Z,{sx:{mb:3},children:[(0,A.jsx)(q,{handleOpen:function(){return J(!0)},customers:I,selectedCustomers:O,onChange:function(e){return R(e)}}),(0,A.jsx)(h.Z,{sx:{position:"relative",overflow:"unset"},children:(0,A.jsx)(v.Z,{children:(0,A.jsxs)(p.Z,{size:r.dense?"small":"medium",sx:{minWidth:800},children:[(0,A.jsx)(T.K,{order:r.order,orderBy:r.orderBy,headLabel:ne,rowCount:b.length,numSelected:r.selected.length,onSort:r.onSort}),(0,A.jsxs)(f.Z,{children:[V.length>0&&V.slice(r.page*r.rowsPerPage,r.page*r.rowsPerPage+r.rowsPerPage).map((function(e,n){return(0,A.jsx)(U,{row:e,selected:r.selected.includes(e.id)},n)})),(0,A.jsx)(T.et,{notFound:ee})]})]})})}),(0,A.jsx)(T.S_,{count:V.length||0,page:r.page,rowsPerPage:r.rowsPerPage,onPageChange:r.onChangePage,onRowsPerPageChange:r.onChangeRowsPerPage,dense:r.dense,onChangeDense:r.onChangeDense})]}),(0,A.jsx)(E,{title:t("customers"),list:I,open:G,onClose:function(){return J(!1)},selected:function(e){return _===e},onSelect:function(e){return H(e.id)}})]})}function $(){return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r.ql,{children:(0,A.jsx)("title",{children:" Invoice For Customers Report"})}),(0,A.jsx)(X,{})]})}}}]);
//# sourceMappingURL=880.7d947137.chunk.js.map