"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[2435],{20302:function(e,t,n){n.d(t,{J:function(){return l},Z:function(){return i}});var r=n(74165),a=n(15861);function l(){return o.apply(this,arguments)}function o(){return(o=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("https://invoicecollectionsystemapi.azurewebsites.net/customer",{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return s.apply(this,arguments)}function s(){return(s=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("https://invoicecollectionsystemapi.azurewebsites.net/api/User/UsersNameByRole/sales",{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},41557:function(e,t,n){n.d(t,{b:function(){return l},j:function(){return o}});var r=n(80831),a=function(e){return(0,(0,r.Z)().t)(e)},l=function(){return[a("All"),a("Operation"),a("Sales"),a("Installation"),a("Collection"),a("TenderAndContracts")]},o=function(){return[a("Operation"),a("Installation"),a("Sales"),a("Collection"),a("TenderAndContracts")]}},16568:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(4942),a=n(29439),l=n(72791),o=n(36314),i=n(5574),s=n(48550),c=n(4567),u=n(63466),d=n(76278),x=n(34065),h=(n(80160),n(27216)),f=n(96349),v=n(80184);function p(e){var t=e.title,n=void 0===t?"Address Book":t,p=e.list,m=e.action,Z=e.open,j=e.onClose,b=e.selected,g=e.onSelect,S=(0,l.useState)(""),y=(0,a.Z)(S,2),C=y[0],w=y[1],D=function(e){var t=e.inputData,n=e.query;if(n)return t.filter((function(e){return-1!==e.customerCode.toLowerCase().indexOf(n.toLowerCase())||-1!==e.customerNameEn.toLowerCase().indexOf(n.toLowerCase())||-1!==e.customerNameAr.toLowerCase().indexOf(n.toLowerCase())}));return t}({inputData:p,query:C}),k=!D.length&&!!C,N=(0,l.useCallback)((function(e){w(e.target.value)}),[]),I=(0,l.useCallback)((function(e){g(e),w(""),j()}),[j,g]),T=(0,v.jsx)(o.Z,{spacing:.5,sx:{p:.5,maxHeight:640,overflowX:"hidden"},children:D.map((function(e){return(0,v.jsxs)(o.Z,{spacing:.5,component:d.Z,selected:b("".concat(e.id)),onClick:function(){return I(e)},sx:(0,r.Z)({py:1,px:1.5,borderRadius:1,flexDirection:"column",alignItems:"flex-start"},"&.".concat(x.Z.selected),{bgcolor:"action.selected","&:hover":{bgcolor:"action.selected"}}),children:[(0,v.jsx)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:(0,v.jsxs)(c.Z,{variant:"subtitle2",children:["Code: ",e.customerCode]})}),(0,v.jsxs)(c.Z,{variant:"body2",sx:{color:"text.secondary"},children:["Name ENglish: ",e.customerNameEn]}),(0,v.jsxs)(c.Z,{variant:"body2",sx:{color:"text.secondary"},children:["Name Arabic: ",e.customerNameAr]})]},e.id)}))});return(0,v.jsxs)(i.Z,{fullWidth:!0,maxWidth:"xs",open:Z,onClose:j,children:[(0,v.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:3,pr:1.5},children:[(0,v.jsxs)(c.Z,{variant:"h6",children:[" ",n," "]}),m&&m]}),(0,v.jsx)(o.Z,{sx:{p:2,pt:0},children:(0,v.jsx)(s.Z,{value:C,onChange:N,placeholder:"Search...",InputProps:{startAdornment:(0,v.jsx)(u.Z,{position:"start",children:(0,v.jsx)(h.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),k?(0,v.jsx)(f.Z,{query:C,sx:{px:3,pt:5,pb:10}}):T]})}},44070:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(4942),a=n(29439),l=n(72791),o=n(36314),i=n(5574),s=n(48550),c=n(4567),u=n(63466),d=n(76278),x=n(34065),h=(n(80160),n(27216)),f=n(96349),v=n(80184);function p(e){var t=e.title,n=void 0===t?"Address Book":t,p=e.list,m=e.action,Z=e.open,j=e.onClose,b=e.selected,g=e.onSelect,S=(0,l.useState)(""),y=(0,a.Z)(S,2),C=y[0],w=y[1],D=function(e){var t=e.inputData,n=e.query;if(n)return t.filter((function(e){return-1!==e.username.toLowerCase().indexOf(n.toLowerCase())}));return t}({inputData:p,query:C}),k=!D.length&&!!C,N=(0,l.useCallback)((function(e){w(e.target.value)}),[]),I=(0,l.useCallback)((function(e){g(e),w(""),j()}),[j,g]),T=(0,v.jsx)(o.Z,{spacing:.5,sx:{p:.5,maxHeight:640,overflowX:"hidden"},children:D.map((function(e){return(0,v.jsx)(o.Z,{spacing:.5,component:d.Z,selected:b("".concat(e.id)),onClick:function(){return I(e)},sx:(0,r.Z)({py:1,px:1.5,borderRadius:1,flexDirection:"column",alignItems:"flex-start"},"&.".concat(x.Z.selected),{bgcolor:"action.selected","&:hover":{bgcolor:"action.selected"}}),children:(0,v.jsx)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:(0,v.jsx)(c.Z,{variant:"subtitle2",textTransform:"bold",children:e.username})})},e.id)}))});return(0,v.jsxs)(i.Z,{fullWidth:!0,maxWidth:"xs",open:Z,onClose:j,children:[(0,v.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:3,pr:1.5},children:[(0,v.jsxs)(c.Z,{variant:"h6",children:[" ",n," "]}),m&&m]}),(0,v.jsx)(o.Z,{sx:{p:2,pt:0},children:(0,v.jsx)(s.Z,{value:C,onChange:N,placeholder:"Search...",InputProps:{startAdornment:(0,v.jsx)(u.Z,{position:"start",children:(0,v.jsx)(h.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),k?(0,v.jsx)(f.Z,{query:C,sx:{px:3,pt:5,pb:10}}):T]})}},44557:function(e,t,n){n.r(t),n.d(t,{default:function(){return de}});var r=n(6907),a=n(19208),l=n(74165),o=n(15861),i=n(29439),s=n(72791),c=n(89164),u=n(13239),d=(n(51175),n(38072)),x=n(91617),h=n(60720),f=n(50933),v=n(4942),p=n(1413),m=n(8007),Z=n(61134),j=n(44695),b=n(12258),g=n(57621),S=n(36314),y=n(5849),C=n(5574),w=n(97123),D=n(39157),k=n(51691),N=n(65661),I=n(41557),T=n(22459),L=n(39231),A=n(94721),O=n(48550),E=n(63466),P=n(4567),F=n(38887),_=(n(11908),n(27216)),R=n(20302),W=(n(16568),n(44070),n(80184));function B(e){e.currentInvoice;var t=(0,Z.Gc)(),n=t.control,r=t.watch,a=(t.setValue,t.formState.errors,(0,R.J)(),(0,R.Z)(),(0,F.F)("up","md")),l=r();l.customerId,l.customerCode,l.salesPerson,l.customerObj,l.salesPersonObj;return(0,W.jsxs)(S.Z,{spacing:{xs:3,md:5},direction:{xs:"column",md:"row"},divider:(0,W.jsx)(A.Z,{flexItem:!0,orientation:a?"vertical":"horizontal",sx:{borderStyle:"dashed"}}),sx:{p:3},children:[(0,W.jsxs)(S.Z,{sx:{width:1},children:[(0,W.jsx)(S.Z,{direction:"row",alignItems:"center",sx:{mb:1},children:(0,W.jsx)(P.Z,{variant:"h6",sx:{color:"text.disabled",flexGrow:1},children:"Attachment:"})}),(0,W.jsx)(O.Z,{type:"file",id:"file",variant:"outlined",inputProps:{accept:".xls, .xlsx"}})]}),(0,W.jsxs)(S.Z,{sx:{width:1},children:[(0,W.jsx)(S.Z,{direction:"row",alignItems:"center",sx:{mb:1},children:(0,W.jsx)(P.Z,{variant:"h6",sx:{color:"text.disabled",flexGrow:1},children:"New Note:"})}),(0,W.jsx)(Z.Qr,{name:"CreateNote",control:n,render:function(e){var t=e.field;return(0,W.jsx)(O.Z,{fullWidth:!0,value:t.value,onChange:function(e){t.onChange(e)},placeholder:"New Note here",InputProps:{startAdornment:(0,W.jsx)(E.Z,{position:"start",children:(0,W.jsx)(_.Z,{icon:"eva:search-fill",sx:{color:"text.add"}})})}})}})]})]})}var V=n(53106),q=n(62861),z=n(68096),M=n(77196),Q=n(82626),U=n(58406),G=n(80831),H=function(e){return(0,(0,G.Z)().t)(e)},J=function(){return[H("None"),H("Acknowledged"),H("NotAcknowledged"),H("TempAcknowledged"),H("Reject")]},K=function(e){return(0,(0,G.Z)().t)(e)},X=function(){return[K("NotStarted"),K("InProgress"),K("Installed"),K("Delayed")]},$=n(64554),Y=n(79836),ee=n(9195),te=n(56890),ne=n(68745),re=n(53382),ae=n(24308),le=n(39281),oe=(n(80160),n(47974));function ie(e){var t=e.department,n=(e.filters,e.onFilters,e.departmentOptions),r=e.currentInvoice,a=(0,s.useState)(!0),c=(0,i.Z)(a,2),u=(c[0],c[1]),d=(0,s.useState)([]),h=(0,i.Z)(d,2),f=h[0],v=h[1],p=(0,s.useState)([]),m=(0,i.Z)(p,2),j=m[0],b=m[1],S=(0,s.useState)([]),y=(0,i.Z)(S,2),C=y[0],w=y[1],D=(0,s.useState)([]),k=(0,i.Z)(D,2),N=k[0],I=k[1];(0,s.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.G_)();case 3:t=e.sent,v(t),b(t.filter((function(e){return"Collection Source"===e.entityType}))),console.log(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching invoice:",e.t0);case 12:return e.prev=12,u(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var T=(0,Z.Gc)(),L=T.control,E=T.watch,F=T.resetField,_=T.setValue,R=(T.formState.errors,E()),B={deliveryDate:["operation"],department:["operation","sales","collection","tenderandcontracts"],acknowledgeStatuses:["operation","sales"],installationStatus:["installation"],installationDate:["installation"],collectionSource:["collection"],claimStatus:["collection"],claimsDetailStatus:["collection"]},G=function(e){var t=C.filter((function(t){return t.value===e}))[0].id;I(f.filter((function(e){return e.parentId===t})))},H={},K={width:"95%",margin:"10px",borderRadius:"10px"},ie={width:"95%",margin:"10px"},se=B.deliveryDate.includes(t.toLowerCase())?(0,W.jsx)(Z.Qr,{name:"DeliveryDate",control:L,render:function(e){var t=e.field;e.fieldState.error;return(0,W.jsx)(V.M,{label:"Delivery Date",value:t.value,onChange:function(e){t.onChange(e)},sx:K})}}):(0,W.jsx)(O.Z,{label:"Delivery Date",value:r.deliveryDate&&r.deliveryDate.substring(0,null===r||void 0===r?void 0:r.deliveryDate.indexOf("T")),disabled:!0,style:ie}),ce=B.department.includes(t.toLowerCase())?(0,W.jsxs)(z.Z,{sx:{flex:1,flexShrink:0,width:{xs:3}},style:ie,children:[(0,W.jsx)(q.Z,{children:" Department "}),(0,W.jsx)(Z.Qr,{name:"department",control:L,render:function(e){var t=e.field;return(0,W.jsx)(U.Z,{style:H,value:t.value,onChange:function(e){t.onChange(e)},input:(0,W.jsx)(M.Z,{label:"Department"}),renderValue:function(e){return e},sx:{flex:1,textField:{textTransform:"capitalize",fullWidth:!0}},children:n.map((function(e,t){return(0,W.jsx)(Q.Z,{value:e,children:e},t)}))})}})]}):(0,W.jsx)(O.Z,{label:"Department",value:null===r||void 0===r?void 0:r.department,style:ie,disabled:!0}),ue=B.acknowledgeStatuses.includes(t.toLowerCase())?(0,W.jsxs)(z.Z,{sx:{flex:1,flexShrink:0,width:{xs:3}},style:ie,children:[(0,W.jsx)(q.Z,{children:" Acknowledge Status "}),(0,W.jsx)(Z.Qr,{name:"acknowledgeStatus",control:L,render:function(e){var n=e.field;return(0,W.jsx)(U.Z,{style:H,value:n.value,onChange:function(e){n.onChange(e)},input:(0,W.jsx)(M.Z,{label:"Acknowledge Status"}),renderValue:function(e){return e},sx:{textTransform:"capitalize",fullWidth:!0},children:J().map((function(e){return(0,W.jsx)(Q.Z,{value:e,defaultChecked:e===t,children:e},e)}))})}})]}):(0,W.jsx)(O.Z,{label:"Department",value:null===r||void 0===r?void 0:r.acknowledgeStatus,style:ie,disabled:!0}),de=B.installationDate.includes(t.toLowerCase())?(0,W.jsx)(Z.Qr,{name:"InstallationDate",control:L,render:function(e){var t=e.field,n=e.fieldState.error;return(0,W.jsx)($.Z,{sx:K,children:(0,W.jsx)(V.M,{label:"Installation Date",value:t.value,onChange:function(e){t.onChange(e)},slotProps:{flex:1,textField:{fullWidth:!0,error:!!n,helperText:null===n||void 0===n?void 0:n.message}}})})}}):(0,W.jsx)(O.Z,{label:"Installation Date",value:r.installationDate,style:ie,disabled:!0}),xe=B.installationStatus.includes(t.toLowerCase())?(0,W.jsxs)(z.Z,{sx:{flex:1,flexShrink:0,width:{xs:3,md:"80%"}},children:[(0,W.jsx)(q.Z,{}),(0,W.jsx)(Z.Qr,{name:"installationStatus",control:L,render:function(e){var t=e.field;return(0,W.jsx)(U.Z,{style:H,value:t.value,onChange:function(e){t.onChange(e)},input:(0,W.jsx)(M.Z,{label:""}),renderValue:function(e){return e},sx:{textTransform:"capitalize",fullWidth:!0},children:X().map((function(e,t){return(0,W.jsx)(Q.Z,{value:e,children:e},t)}))})}})]}):(0,W.jsx)(O.Z,{label:"Installation Status",value:r.installationStatus,style:ie,disabled:!0}),he=B.collectionSource.includes(t.toLowerCase())?(0,W.jsxs)(z.Z,{sx:{flex:1,flexShrink:0,width:{xs:3}},style:ie,children:[(0,W.jsx)(q.Z,{children:" Collection Source "}),(0,W.jsx)(Z.Qr,{name:"collectionSource",control:L,render:function(e){var t=e.field;return(0,W.jsx)(U.Z,{style:H,value:t.value,onChange:function(e){t.onChange(e),function(e){w([]),I([]),F("claimStatus"),F("claimsDetailStatus");var t=j.filter((function(t){return t.value===e.target.value}))[0].id;w(f.filter((function(e){return e.parentId===t}))),C.length&&(_("claimStatus",C[0].value),G(C[0].value))}(e)},input:(0,W.jsx)(M.Z,{label:"Collection Source"}),renderValue:function(e){return e},sx:{textTransform:"capitalize",fullWidth:!0},children:j.map((function(e,t){return(0,W.jsx)(Q.Z,{value:e.value,children:e.value},t)}))})}})]}):(0,W.jsx)(O.Z,{label:"Collection Source",value:r.collectionSource,style:ie,disabled:!0}),fe=B.claimStatus.includes(t.toLowerCase())?(0,W.jsxs)(z.Z,{sx:{flex:1,flexShrink:0,width:{xs:3}},style:ie,children:[(0,W.jsx)(q.Z,{children:" Claim Status "}),(0,W.jsx)(Z.Qr,{name:"claimStatus",control:L,render:function(e){var t=e.field;return(0,W.jsx)(U.Z,{style:H,value:t.value,onChange:function(e){t.onChange(e),function(e){var t=C.filter((function(t){return t.value===e.target.value}))[0].id;I(f.filter((function(e){return e.parentId===t}))),F("claimsDetailStatus")}(e)},input:(0,W.jsx)(M.Z,{label:"Claim Status"}),renderValue:function(e){return e},sx:{textTransform:"capitalize",fullWidth:!0},children:C.map((function(e,t){return(0,W.jsx)(Q.Z,{value:e.value,children:e.value},t)}))})}})]}):(0,W.jsx)(O.Z,{label:"Claim Status",value:r.claimStatus,style:ie,disabled:!0}),ve=B.claimsDetailStatus.includes(t.toLowerCase())?(0,W.jsxs)(z.Z,{sx:{flex:1,flexShrink:0,width:{xs:3,md:"80%"}},style:ie,children:[(0,W.jsx)(q.Z,{children:" Claims Detail Status "}),(0,W.jsx)(Z.Qr,{name:"claimsDetailStatus",control:L,render:function(e){var t=e.field;return(0,W.jsx)(U.Z,{style:H,value:t.value,onChange:function(e){t.onChange(e),console.log(R)},input:(0,W.jsx)(M.Z,{label:"Claims Detail Status"}),renderValue:function(e){return e},sx:{textTransform:"capitalize",fullWidth:!0},children:N.map((function(e,t){return(0,W.jsx)(Q.Z,{value:e.value,children:e.value},t)}))})}})]}):(0,W.jsx)(O.Z,{label:"Claims Detail Status",value:r.claimsDetailStatus,style:ie,disabled:!0}),pe=(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(P.Z,{variant:"h6",gutterBottom:!0,children:"Notes"}),(0,W.jsx)(le.Z,{sx:{overflow:"unset",mt:5},children:(0,W.jsx)(oe.Z,{children:(0,W.jsxs)(Y.Z,{sx:{minWidth:960},children:[(0,W.jsx)(te.Z,{children:(0,W.jsxs)(ee.Z,{children:[(0,W.jsx)(ne.Z,{width:40,children:"#"}),(0,W.jsx)(ne.Z,{sx:{typography:"subtitle2"},children:"Note"}),(0,W.jsx)(ne.Z,{sx:{typography:"subtitle2"},children:"User"}),(0,W.jsx)(ne.Z,{sx:{typography:"subtitle2"},children:"Create Date"})]})}),(0,W.jsx)(re.Z,{children:null===r||void 0===r?void 0:r.notes.map((function(e,t){return(0,W.jsxs)(ee.Z,{children:[(0,W.jsx)(ne.Z,{children:t+1}),(0,W.jsx)(ne.Z,{children:(0,W.jsx)(P.Z,{variant:"subtitle2",children:e.noteText})}),(0,W.jsx)(ne.Z,{children:e.createdBy}),(0,W.jsx)(ne.Z,{children:e.createdDate.substring(0,e.createdDate.indexOf("T"))})]},t)}))})]})})})]}),me=(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(P.Z,{variant:"h6",gutterBottom:!0,children:"Attachments"}),(0,W.jsx)(le.Z,{sx:{overflow:"unset",mt:5,mb:7},children:(0,W.jsx)(oe.Z,{children:(0,W.jsxs)(Y.Z,{sx:{minWidth:960},children:[(0,W.jsx)(te.Z,{children:(0,W.jsxs)(ee.Z,{children:[(0,W.jsx)(ne.Z,{width:40,children:"#"}),(0,W.jsx)(ne.Z,{sx:{typography:"subtitle2"},children:"Name"}),(0,W.jsx)(ne.Z,{sx:{typography:"subtitle2"},children:"User"}),(0,W.jsx)(ne.Z,{sx:{typography:"subtitle2"},children:"Create Date"})]})}),(0,W.jsx)(re.Z,{children:null===r||void 0===r?void 0:r.attachments.map((function(e,t){return(0,W.jsxs)(ee.Z,{children:[(0,W.jsx)(ne.Z,{children:t+1}),(0,W.jsx)(ne.Z,{children:(0,W.jsxs)(P.Z,{variant:"subtitle2",children:[" ",(0,W.jsx)("a",{target:"_blank",rel:"noreferrer",href:e.attachmentPath,children:e.fileName})," "]})}),(0,W.jsx)(ne.Z,{children:e.createdBy}),(0,W.jsx)(ne.Z,{children:e.createdDate.substring(0,e.createdDate.indexOf("T"))})]},t)}))})]})})})]});ae.Z,ae.Z,P.Z,P.Z,ae.Z,P.Z,P.Z;return(0,W.jsxs)(g.Z,{sx:{pt:5,px:5},children:[(0,W.jsxs)($.Z,{rowGap:1,display:"grid",alignItems:"center",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,W.jsx)(O.Z,{label:"Issue Date",value:r?null===r||void 0===r?void 0:r.issueInvoiceDate.substring(0,null===r||void 0===r?void 0:r.issueInvoiceDate.indexOf("T")):"",style:ie,disabled:!0}),(0,W.jsx)(O.Z,{label:"Amount",value:null===r||void 0===r?void 0:r.invoiceAmount,style:ie,disabled:!0}),(0,W.jsx)(O.Z,{label:"Currency",value:null===r||void 0===r?void 0:r.currency,style:ie,disabled:!0}),(0,W.jsx)(O.Z,{label:"Customer Code",value:null===r||void 0===r?void 0:r.customerCode,style:ie,disabled:!0}),(0,W.jsx)(O.Z,{label:"Name English",value:null===r||void 0===r?void 0:r.customerNameEn,style:ie,disabled:!0}),(0,W.jsx)(O.Z,{label:"Name Arabic",value:null===r||void 0===r?void 0:r.customerNameAr,style:ie,disabled:!0}),(0,W.jsx)(O.Z,{label:"Po Number",value:null===r||void 0===r?void 0:r.customerPO,style:ie,disabled:!0}),(0,W.jsx)(O.Z,{label:"Po Value",value:null===r||void 0===r?void 0:r.poValue,style:ie,disabled:!0}),(0,W.jsx)(O.Z,{label:"Region",value:null===r||void 0===r?void 0:r.region,style:ie,disabled:!0}),(0,W.jsx)(O.Z,{label:"Contract Number",value:null===r||void 0===r?void 0:r.contractNo,style:ie,disabled:!0}),se,de,ce,xe,(0,W.jsx)(O.Z,{label:"Days To Collected",value:null===r||void 0===r?void 0:r.daysToCollected,style:ie,disabled:!0}),ue,he,fe,ve,(0,W.jsx)(O.Z,{label:"Sales Confirm",value:null===r||void 0===r?void 0:r.salesConfirm,style:ie,disabled:!0}),(0,W.jsx)(O.Z,{label:"Created By",value:null===r||void 0===r?void 0:r.createdBy,style:ie,disabled:!0}),(0,W.jsx)(O.Z,{label:"Sales Taker",value:null===r||void 0===r?void 0:r.salesTakerName,style:ie,disabled:!0}),(0,W.jsx)(O.Z,{label:"Collector Name",value:null===r||void 0===r?void 0:r.collectorName,style:ie,disabled:!0}),(0,W.jsx)(O.Z,{label:"Responsible Engineer Name",value:null===r||void 0===r?void 0:r.responsibleEngineerName,style:ie,disabled:!0})]}),pe,(0,W.jsx)(A.Z,{sx:{mt:5,borderStyle:"dashed",mb:3}}),me]})}var se=function(e){return[e.toLocaleString("default",{year:"numeric"}),e.toLocaleString("default",{month:"2-digit"}),e.toLocaleString("default",{day:"2-digit"})].join("-")};function ce(e){var t=e.currentInvoice,n=(0,a.tv)(),r=((0,T.k)(),(0,T.k)()),c=(0,s.useState)(!1),u=(0,i.Z)(c,2),d=(u[0],u[1]),h=(0,s.useState)(!1),f=(0,i.Z)(h,2),A=f[0],O=f[1],E=(0,s.useState)(""),P=(0,i.Z)(E,2),F=P[0],_=P[1];console.log(t.department);var R=(0,I.j)().map((function(e){return e.toLocaleLowerCase()})).indexOf(null===t||void 0===t?void 0:t.department.toLowerCase()),V=function(){O(!1)},q={deliveryDate:["operation"],department:["operation","sales","tenderandcontracts"],acknowledgeStatuses:["operation","sales"],installationStatus:["installation"],installationDate:["installation"],collectionSource:["collection"],claimStatus:["collection"],claimsDetailStatus:["collection"]},z=m.Ry().shape({CreateNote:m.Z_(),department:m.Z_(),acknowledgeStatus:m.Z_(),DeliveryDate:m.nK().nullable(),installationStatus:m.Z_(),installationDate:m.nK().nullable(),collectionSource:m.Z_(),claimStatus:m.Z_(),claimsDetailStatus:m.Z_()}),M=(0,s.useMemo)((function(){return{CreateNote:(null===t||void 0===t?void 0:t.CreateNote)||"",department:(null===t||void 0===t?void 0:t.department)||"",acknowledgeStatus:(null===t||void 0===t?void 0:t.acknowledgeStatus)||"",DeliveryDate:(null===t||void 0===t?void 0:t.DeliveryDate)||new Date,installationStatus:(null===t||void 0===t?void 0:t.installationStatus)||"",installationDate:(null===t||void 0===t?void 0:t.installationDate)||new Date,collectionSource:(null===t||void 0===t?void 0:t.CollectionSource)||"",claimStatus:(null===t||void 0===t?void 0:t.ClaimStatus)||"",claimsDetailStatus:(null===t||void 0===t?void 0:t.ClaimsDetailStatus)||""}}),[t]),Q=(0,s.useState)(M),U=(0,i.Z)(Q,2),G=U[0],H=U[1],J=(0,Z.cI)({resolver:(0,j.X)(z),defaultValues:M}),K=J.reset,X=J.watch,$=J.handleSubmit,Y=J.formState.isSubmitting,ee=(0,s.useCallback)((function(e,t){H((function(n){return(0,p.Z)((0,p.Z)({},n),{},(0,v.Z)({},e,t))}))}),[]),te=$(function(){var e=(0,o.Z)((0,l.Z)().mark((function e(a){var o,i,s,c,u,h,f,v,p,m,Z,j,b;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(),console.log("File uploaded"),console.log("Data:",a),r.onTrue(),e.prev=4,e.next=7,new Promise((function(e){return setTimeout(e,500)}));case 7:o=X(),i=o.CreateNote,s=o.department,c=o.acknowledgeStatus,u=o.DeliveryDate,h=o.installationDate,f=o.installationStatus,v=o.collectionSource,p=o.claimStatus,m=o.claimsDetailStatus,Z=[],s&&q.department.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/department",value:"".concat(s)}),c&&q.acknowledgeStatuses.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/acknowledgeStatus",value:"".concat(c)}),u&&q.deliveryDate.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/DeliveryDate",value:"".concat(se(u))}),h&&q.installationDate.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/DeliveryDate",value:"".concat(se(h))}),f&&q.installationStatus.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/InstallationDate",value:"".concat(f)}),v&&q.collectionSource.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/CollectionSource",value:"".concat(v)}),p&&q.claimStatus.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/ClaimStatus",value:"".concat(p)}),m&&q.claimsDetailStatus.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/ClaimsDetailStatus",value:"".concat(m)}),Z.push({op:"add",path:"/CreateNote",value:{NoteText:"".concat(i)}}),K(),j=(0,x.iJ)(R),console.log("Body",JSON.stringify(Z)),b=(0,x.kT)(R,t.id),console.log("Url",b),fetch(b,{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(Z),Cache:"default"}).then((function(e){if(!e.ok){if(400===e.status)return e.text().then((function(e){throw _(e),O(!0),new Error("Bad Request: ".concat(e))}));throw new Error("Network response was not ok")}return e.text()})).then((function(e){d(!0),r.onFalse(),n.replace(j),console.log("res:",e)})).catch((function(e){console.error("Fetch Error:",e)})),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(4),console.error("Error:",e.t0),r.onFalse();case 30:case"end":return e.stop()}}),e,null,[[4,26]])})));return function(t){return e.apply(this,arguments)}}()),ne=function(){var e=new FormData,n=document.querySelector("#file").files[0];if(n){e.append("file",n);try{var r=(0,x.ZN)(t.id);console.log("Url",r),fetch(r,{mode:"cors",method:"POST",headers:{Accept:"application/json"},body:e,Cache:"default"}).then(function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,3e3)}));case 2:if(t.ok){e.next=9;break}if(400!==t.status&&415!==t.status){e.next=8;break}return e.next=6,t.text();case 6:throw n=e.sent,new Error("Bad Request: ".concat(n));case 8:throw new Error("Network response was not ok");case 9:return e.abrupt("return",t.text());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){})).catch((function(e){console.error("Fetch Error:",e)}))}catch(a){console.log(a)}}};return(0,W.jsxs)(L.ZP,{methods:J,onSubmit:te,children:[(0,W.jsxs)(g.Z,{children:[(0,W.jsx)(B,{currentInvoice:t}),(0,W.jsx)(ie,{currentInvoice:t,filters:G,onFilters:ee,departmentOptions:(0,I.j)().map((function(e){return e})),department:t.department})]}),(0,W.jsx)(S.Z,{justifyContent:"flex-end",direction:"row",spacing:2,sx:{mt:3},children:(0,W.jsxs)(b.Z,{size:"large",variant:"contained",loading:r.value&&Y,type:"submit",children:[t?"Update":"Create"," & Send"]})}),(0,W.jsxs)(C.Z,{open:A,color:"#ef5350",keepMounted:!0,onClose:V,"aria-describedby":"alert-dialog-slide-description",className:"dialog-error",children:[(0,W.jsx)(N.Z,{children:"Error"}),(0,W.jsx)(D.Z,{children:(0,W.jsx)(k.Z,{id:"alert-dialog-slide-description",children:String(F)})}),(0,W.jsx)(w.Z,{children:(0,W.jsx)(y.Z,{onClick:V,children:"Ok"})})]})]})}n(10826);function ue(e){var t=e.id,n=(0,h.K$)(),r=(0,s.useState)(null),a=(0,i.Z)(r,2),v=a[0],p=a[1],m=(0,s.useState)(!0),Z=(0,i.Z)(m,2),j=Z[0],b=Z[1];return(0,s.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.Ag)(t);case 3:n=e.sent,p(n),console.log(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching invoice:",e.t0);case 11:return e.prev=11,b(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),j||!v?(0,W.jsx)(u.Z,{}):(0,W.jsxs)(c.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,W.jsx)(f.Z,{heading:"Edit invoice",links:[{name:"Dashboard",href:d.H.dashboard.root},{name:"Invoice",href:d.H.dashboard.invoice.root},{name:"New Invoice"}],sx:{mb:{xs:3,md:5}}}),(0,W.jsx)(ce,{currentInvoice:v})]})}function de(){var e=(0,a.UO)(),t=e.id;return console.log(e),(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(r.ql,{children:(0,W.jsx)("title",{children:" Edit invoice"})}),(0,W.jsx)(ue,{id:t})]})}},51691:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(63366),a=n(87462),l=n(72791),o=n(59278),i=n(94419),s=n(66934),c=n(31402),u=n(4567),d=n(75878),x=n(21217);function h(e){return(0,x.Z)("MuiDialogContentText",e)}(0,d.Z)("MuiDialogContentText",["root"]);var f=n(80184),v=["children","className"],p=(0,s.ZP)(u.Z,{shouldForwardProp:function(e){return(0,s.FO)(e)||"classes"===e},name:"MuiDialogContentText",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),m=l.forwardRef((function(e,t){var n=(0,c.Z)({props:e,name:"MuiDialogContentText"}),l=n.className,s=(0,r.Z)(n,v),u=function(e){var t=e.classes,n=(0,i.Z)({root:["root"]},h,t);return(0,a.Z)({},t,n)}(s);return(0,f.jsx)(p,(0,a.Z)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:s,className:(0,o.Z)(u.root,l)},n,{classes:u}))}))},65661:function(e,t,n){var r=n(87462),a=n(63366),l=n(72791),o=n(59278),i=n(94419),s=n(4567),c=n(66934),u=n(31402),d=n(17673),x=n(85090),h=n(80184),f=["className","id"],v=(0,c.ZP)(s.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,t){return t.root}})({padding:"16px 24px",flex:"0 0 auto"}),p=l.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiDialogTitle"}),s=n.className,c=n.id,p=(0,a.Z)(n,f),m=n,Z=function(e){var t=e.classes;return(0,i.Z)({root:["root"]},d.a,t)}(m),j=l.useContext(x.Z).titleId,b=void 0===j?c:j;return(0,h.jsx)(v,(0,r.Z)({component:"h2",className:(0,o.Z)(Z.root,s),ownerState:m,ref:t,variant:"h6",id:null!=c?c:b},p))}));t.Z=p}}]);
//# sourceMappingURL=2435.220d15de.chunk.js.map