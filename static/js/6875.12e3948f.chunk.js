"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[6875],{20302:function(e,n,t){t.d(n,{$k:function(){return p},JL:function(){return a},LA:function(){return x},PH:function(){return u},Ze:function(){return f}});var r=t(93433),s=t(74165),o=t(15861),c="https://invoicecollectionsystemapi.azurewebsites.net";function a(){return i.apply(this,arguments)}function i(){return(i=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(c,"/customer"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return l.apply(this,arguments)}function l(){return(l=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{id:"0",customerCode:"All",customerNameEn:"All",customerNameAr:"All"}],e.next=3,fetch("".concat(c,"/customer"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n.push.apply(n,(0,r.Z)(e))})).catch((function(e){return console.log()}));case 3:return console.log("List: ".list),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return d.apply(this,arguments)}function d(){return(d=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(c,"/api/User/UsersNameByRole/sales"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=(0,o.Z)((0,s.Z)().mark((function e(n){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(c,"/Customer/").concat(n),{mode:"cors"});case 3:if(!(t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:console.error("Failed to fetch invoice: ".concat(t.status," - ").concat(t.statusText)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:return e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function x(e){return m.apply(this,arguments)}function m(){return(m=(0,o.Z)((0,s.Z)().mark((function e(n){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,e.next=3,fetch("".concat(c,"/Customer/").concat(n,"/Delete"),{mode:"cors",method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},Cache:"default"}).then((function(e){if(e.ok){if(204===e.status)return null;if(200===e.status)return e.json();throw new Error("Unexpected status code: ".concat(e.status))}throw new Error("Network response was not ok")})).then((function(e){console.log("Deleted successfuly")})).catch((function(e){console.log(e),t=!1}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},22260:function(e,n,t){t.d(n,{AW:function(){return u},Eq:function(){return a},Fo:function(){return p},fx:function(){return f}});var r=t(93433),s=t(74165),o=t(15861),c="https://invoicecollectionsystemapi.azurewebsites.net";function a(e){return i.apply(this,arguments)}function i(){return(i=(0,o.Z)((0,s.Z)().mark((function e(n){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("".concat(c,"/api/User/UsersNameByRole/").concat(n),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return l.apply(this,arguments)}function l(){return(l=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(c,"/api/User"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return(d=(0,o.Z)((0,s.Z)().mark((function e(n){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("".concat(c,"/api/Invoices/GetInvoicesForUser?User=").concat(n),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return h.apply(this,arguments)}function h(){return(h=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{id:"0",name:"All"}],e.next=3,fetch("".concat(c,"/api/User/roles"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n.push.apply(n,(0,r.Z)(e))})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},46875:function(e,n,t){t.r(n),t.d(n,{default:function(){return K}});var r=t(6907),s=t(4942),o=t(1413),c=t(74165),a=t(15861),i=t(29439),u=t(72791),l=t(69931),f=t(57621),d=t(79836),p=t(89164),h=t(53382),x=t(39281),m=t(36314),Z=t(94721),v=t(5849),g=t(38072),w=t(19208),j=t(57689),b=t(27216),y=(t(83854),t(47974)),k=t(60720),C=t(50933),D=t(1382),P=t(91617),S=(t(41557),t(62633),t(20302)),R=t(22260),F=t(10370),N=t(82626),A=t(9195),L=t(68745),E=t(22459),I=t(3352),U=t(52115),_=t(80184);function z(e){var n=e.row,t=(e.selected,e.onSelectRow,e.onViewRow,e.onEditRow),r=e.onDeleteRow,s=(e.handleOpenInquiry,n.id,n.firstName),o=n.lastName,c=n.userName,a=n.roles,i=(0,l.nt)().t,u=function(e){return i(e)},f=a.reduce((function(e,n){return"".concat(e,", ").concat(n," ")}),"").slice(1,-1),d=(0,E.k)(),p=(0,U.S)();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(A.Z,{hover:!0,children:[(0,_.jsx)(L.Z,{children:s}),(0,_.jsx)(L.Z,{children:o}),(0,_.jsx)(L.Z,{children:c}),(0,_.jsx)(L.Z,{children:f})]}),(0,_.jsxs)(U.Z,{open:p.open,onClose:p.onClose,arrow:"right-top",sx:{width:160},children:[(0,_.jsxs)(N.Z,{onClick:function(){t(),p.onClose()},children:[(0,_.jsx)(b.Z,{icon:"solar:eye-bold"}),u("edit")]}),(0,_.jsx)(Z.Z,{sx:{borderStyle:"solid"}}),(0,_.jsxs)(N.Z,{onClick:function(){d.onTrue(),p.onClose()},sx:{color:"error.main"},children:[(0,_.jsx)(b.Z,{icon:"solar:trash-bin-trash-bold"}),u("delete")]})]}),(0,_.jsx)(I.Q,{open:d.value,onClose:d.onFalse,title:u("delete"),content:u("deleteDialogContent"),action:(0,_.jsx)(v.Z,{variant:"contained",color:"error",onClick:function(){console.log("Delete clicked"),r(),d.onFalse()},children:u("delete")})})]})}var O=t(48550),W=t(63466),H=t(62861),T=t(58406),B=t(68096),q=t(77196),G=t(13034);function Q(e){var n=e.filters,t=e.onFilters,r=e.departmentOptions,s=((0,U.S)(),(0,u.useCallback)((function(e){t("departments",e)}),[t])),o=(0,u.useCallback)((function(e){t("name",e.target.value)}),[t]),c=(0,l.nt)().t,a=function(e){return c(e)};return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(m.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:(0,_.jsxs)(m.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[(0,_.jsxs)(B.Z,{sx:{flexShrink:0,width:{xs:1,md:180}},children:[(0,_.jsx)(H.Z,{children:a("departments")}),(0,_.jsx)(T.Z,{multiple:!0,value:n.departments,onChange:function(e){var n=r,t=e.target.value,o=t.length-1;t[o];console.log(t),"All"===t[o]?s(n):"All"===t[0]?s(t.slice(1)):t===n.slice(1)?s([]):s(t)},input:(0,_.jsx)(q.Z,{label:a("departments")}),renderValue:function(e){return e.map((function(e){return e})).join(", ")},sx:{textTransform:"capitalize"},children:r.map((function(e,t){return(0,_.jsxs)(N.Z,{value:e,children:[(0,_.jsx)(G.Z,{disableRipple:!0,size:"small",checked:n.departments.includes(e)}),0===t?a("all"):e]},t)}))})]}),(0,_.jsx)(O.Z,{fullWidth:!0,value:n.name,onChange:o,placeholder:a("searchCustomerName"),InputProps:{startAdornment:(0,_.jsx)(W.Z,{position:"start",children:(0,_.jsx)(b.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})]})})})}var V={name:"",service:[],paidStatus:[],departments:[],status:"all",startDate:null,endDate:null};function $(){var e=(0,k.K$)(),n=(0,w.tv)(),t=(0,D.x6)({defaultOrderBy:"issueInvoiceDate"}),r=(0,j.s0)(),N=(0,l.nt)().t,A=function(e){return N(e)},L=(0,u.useState)([]),E=(0,i.Z)(L,2),I=E[0],U=E[1],O=(0,u.useState)([]),W=(0,i.Z)(O,2),H=W[0],T=W[1],B=(0,u.useState)(V),q=(0,i.Z)(B,2),G=q[0],$=q[1],K=(0,u.useState)(!1),J=(0,i.Z)(K,2),M=J[0],X=J[1],Y=(0,u.useState)(""),ee=(0,i.Z)(Y,2),ne=(ee[0],ee[1],(0,u.useState)(!1)),te=(0,i.Z)(ne,2),re=(te[0],te[1],(0,u.useState)(0)),se=(0,i.Z)(re,2);se[0],se[1];(0,u.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,R.AW)();case 3:n=e.sent,U(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching customers:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=(0,a.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,R.Fo)();case 3:n=e.sent,T(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching customers:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();n(),e()}),[]);var oe=[{id:"firstName",label:A("firstName")},{id:"lastName",label:A("lastName")},{id:"userName",label:A("userName")},{id:"roles",label:A("roles")}],ce=!(!G.startDate||!G.endDate)&&G.startDate.getTime()>G.endDate.getTime(),ae=function(e){var n=e.inputData,t=e.comparator,r=e.filters,s=r.name,o=r.departments,c=n.map((function(e,n){return[e,n]}));c.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n=c.map((function(e){return e[0]})),s&&(n=n.filter((function(e){return-1!==e.firstName.toLowerCase().indexOf(s.toLowerCase())||-1!==e.lastName.indexOf(s.toLowerCase())||-1!==e.userName.toLowerCase().indexOf(s.toLowerCase())})));o.length&&(n=n.filter((function(e){return e.roles.every((function(e){return o.includes(e)}))||o.includes("All")})));return n}({inputData:I,comparator:(0,D.sQ)(t.order,t.orderBy),filters:G,dateError:ce}),ie=(ae.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage),t.dense?56:76),ue=!!G.name||!!G.service.length||"all"!==G.status||!!G.startDate&&!!G.endDate,le=!ae.length&&ue||!ae.length,fe=(0,u.useCallback)((function(e,n){t.onResetPage(),$((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,s.Z)({},e,n))}))}),[t]),de=(0,u.useCallback)((function(e){console.log(g.H.customers.edit(e)),n.push(g.H.customers.edit(e))}),[n]),pe=(0,u.useCallback)((function(e){n.push(g.H.dashboard.invoice.details(e))}),[n]),he=(0,u.useCallback)((function(){$(V)}),[]);return(0,_.jsxs)(p.Z,{maxWidth:!e.themeStretch&&"lg",children:[(0,_.jsx)(C.Z,{heading:"List",links:[{name:A("app"),href:g.H.dashboard.root},{name:A("customer")},{name:A("list")}],action:(0,_.jsx)(m.Z,{direction:"row",divider:(0,_.jsx)(Z.Z,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:(0,_.jsx)(v.Z,{onClick:function(){return r(g.H.customers.create)},variant:"contained",startIcon:(0,_.jsx)(b.Z,{icon:"mingcute:add-line"}),children:A("newCustomer")})}),sx:{mb:{xs:3,md:5}}}),(0,_.jsxs)(f.Z,{children:[(0,_.jsx)(Q,{filters:G,onFilters:fe,departmentOptions:H.map((function(e){return e.name}))}),ue&&(0,_.jsx)(F.Z,{filters:G,onFilters:fe,onResetFilters:he,results:ae.length,sx:{p:2.5,pt:0}}),(0,_.jsx)(x.Z,{sx:{position:"relative",overflow:"unset"},children:(0,_.jsx)(y.Z,{children:(0,_.jsxs)(d.Z,{size:t.dense?"small":"medium",sx:{minWidth:800},children:[(0,_.jsx)(D.K,{order:t.order,orderBy:t.orderBy,headLabel:oe,rowCount:I.length,numSelected:t.selected.length,onSort:t.onSort}),(0,_.jsxs)(h.Z,{children:[ae.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map((function(e){return(0,_.jsx)(z,{row:e,selected:t.selected.includes(e.id),onSelectRow:function(){return t.onSelectRow(e.id)},onViewRow:function(){return pe(e.id)},onEditRow:function(){return de(e.id)},onDeleteRow:function(){return function(e){var n=!0,t=function(){var t=(0,a.Z)((0,c.Z)().mark((function t(){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,S.LA)(e);case 3:n=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error("Error fetching invoices:",t.t0);case 9:if(console.log("Success status: ",n),!n){t.next=22;break}return t.prev=11,t.next=14,(0,P.qL)();case 14:r=t.sent,U(r),t.next=21;break;case 18:t.prev=18,t.t1=t.catch(11),console.error("Error fetching invoices:",t.t1);case 21:X(!M);case 22:case"end":return t.stop()}}),t,null,[[0,6],[11,18]])})));return function(){return t.apply(this,arguments)}}();t()}(e.id)},handleOpenInquiry:function(){return console.log(e.id)}},e.id)})),(0,_.jsx)(D.$W,{height:ie,emptyRows:(0,D.fQ)(t.page,t.rowsPerPage,I.length)}),(0,_.jsx)(D.et,{notFound:le})]})]})})}),(0,_.jsx)(D.S_,{count:ae.length,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})]})}function K(){return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r.ql,{children:(0,_.jsx)("title",{children:" Users List"})}),(0,_.jsx)($,{})]})}},10370:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(1413),s=t(45987),o=t(64554),c=t(85771),a=t(27938),i=t(5849),u=t(36314),l=t(27216),f=t(25265),d=t(80184),p=["filters","onFilters","onResetFilters","results"],h=["label","children","sx"];function x(e){var n=e.filters,t=e.onFilters,a=e.onResetFilters,h=e.results,x=(0,s.Z)(e,p),Z=(0,f.l2)(n.startDate,n.endDate);return(0,d.jsxs)(u.Z,(0,r.Z)((0,r.Z)({spacing:1.5},x),{},{children:[(0,d.jsxs)(o.Z,{sx:{typography:"body2"},children:[(0,d.jsx)("strong",{children:h}),(0,d.jsx)(o.Z,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),(0,d.jsxs)(u.Z,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!n.service.length&&(0,d.jsx)(m,{label:"Service:",children:n.service.map((function(e){return(0,d.jsx)(c.Z,{label:e,size:"small",onDelete:function(){return function(e){var r=n.service.filter((function(n){return n!==e}));t("service",r)}(e)}},e)}))}),"all"!==n.status&&(0,d.jsx)(m,{label:"Status:",children:(0,d.jsx)(c.Z,{size:"small",label:n.status,onDelete:function(){t("status","all")}})}),n.startDate&&n.endDate&&(0,d.jsx)(m,{label:"Date:",children:(0,d.jsx)(c.Z,{size:"small",label:Z,onDelete:function(){t("startDate",null),t("endDate",null)}})}),(0,d.jsx)(i.Z,{color:"error",onClick:a,startIcon:(0,d.jsx)(l.Z,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]}))}function m(e){var n=e.label,t=e.children,c=e.sx,i=(0,s.Z)(e,h);return(0,d.jsxs)(u.Z,(0,r.Z)((0,r.Z)({component:a.Z,variant:"outlined",spacing:1,direction:"row",sx:(0,r.Z)({p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed"},c)},i),{},{children:[(0,d.jsx)(o.Z,{component:"span",sx:{typography:"subtitle2"},children:n}),(0,d.jsx)(u.Z,{spacing:1,direction:"row",flexWrap:"wrap",children:t})]}))}}}]);
//# sourceMappingURL=6875.12e3948f.chunk.js.map