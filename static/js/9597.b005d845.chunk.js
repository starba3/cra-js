"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[9597],{20302:function(e,n,t){t.d(n,{$k:function(){return h},JL:function(){return s},LA:function(){return m},PH:function(){return i},Ze:function(){return p}});var r=t(93433),c=t(74165),o=t(15861),a="https://invoicecollectionsystemapi.azurewebsites.net";function s(){return u.apply(this,arguments)}function u(){return(u=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(a,"/customer"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return l.apply(this,arguments)}function l(){return(l=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{id:"0",customerCode:"All",customerNameEn:"All",customerNameAr:"All"}],e.next=3,fetch("".concat(a,"/customer"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n.push.apply(n,(0,r.Z)(e))})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return f.apply(this,arguments)}function f(){return(f=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(a,"/api/User/UsersNameByRole/sales"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return d.apply(this,arguments)}function d(){return(d=(0,o.Z)((0,c.Z)().mark((function e(n){var t,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(a,"/Customer/").concat(n),{mode:"cors"});case 3:if(!(t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:console.error("Failed to fetch invoice: ".concat(t.status," - ").concat(t.statusText)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:return e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function m(e){return x.apply(this,arguments)}function x(){return(x=(0,o.Z)((0,c.Z)().mark((function e(n){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,e.next=3,fetch("".concat(a,"/Customer/").concat(n,"/Delete"),{mode:"cors",method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},Cache:"default"}).then((function(e){if(e.ok){if(204===e.status)return null;if(200===e.status)return e.json();throw new Error("Unexpected status code: ".concat(e.status))}throw new Error("Network response was not ok")})).then((function(e){console.log("Deleted successfuly")})).catch((function(e){console.log(e),t=!1}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},91617:function(e,n,t){t.d(n,{Ag:function(){return h},DW:function(){return w},ES:function(){return p},G_:function(){return y},OX:function(){return v},Wu:function(){return C},ZN:function(){return Z},iJ:function(){return x},kT:function(){return m},m3:function(){return b},qL:function(){return s},zJ:function(){return i}});var r=t(74165),c=t(15861),o=(t(763),t(38072)),a="https://invoicecollectionsystemapi.azurewebsites.net";function s(){return u.apply(this,arguments)}function u(){return(u=(0,c.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(a,"/api/invoices"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e){return l.apply(this,arguments)}function l(){return(l=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("".concat(a,"/api/Invoices/Department/").concat(n),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=(0,c.Z)((0,r.Z)().mark((function e(n){var t,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],c="",c=n?"".concat(a,"/api/Invoices/GetInvoicesBySalesConfirmation?salesConfirm=").concat(n):"".concat(a,"/api/Invoices/NotConfirmedBySales"),e.next=5,fetch(c,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return d.apply(this,arguments)}function d(){return(d=(0,c.Z)((0,r.Z)().mark((function e(n){var t,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(a,"/api/invoices/").concat(n),{mode:"cors"});case 3:if(!(t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:console.error("Failed to fetch invoice: ".concat(t.status," - ").concat(t.statusText)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:return e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function m(e,n){var t="";switch(e){case-1:case 0:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/Operation");break;case 1:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/installation");break;case 2:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/Sales");break;case 3:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/Collection");break;case 4:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/TenderAndContracts")}return t}function x(e){var n="";switch(e){case-1:case 0:n=o.H.departments.operation.list;break;case 1:n=o.H.departments.installation.list;break;case 2:n=o.H.departments.sales.list;break;case 3:n=o.H.departments.collection.list;break;case 4:n=o.H.departments.tenderAndConract.list}return n}function v(){return"".concat(a,"/api/ExcelImport/import-invoices")}function Z(e){return"".concat(a,"/api/Attachments/").concat(e)}function y(){return g.apply(this,arguments)}function g(){return(g=(0,c.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(a,"/api/CollectionData"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return j.apply(this,arguments)}function j(){return(j=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},console.log("".concat(a,"/api/Invoices/").concat(n,"/Inquiry")),e.next=4,fetch("".concat(a,"/api/Invoices/").concat(n,"/Inquiry"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return k.apply(this,arguments)}function k(){return(k=(0,c.Z)((0,r.Z)().mark((function e(n){var t,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n){e.next=3;break}return e.abrupt("return",t);case 3:return c=n.reduce((function(e,n){return"".concat(e,"customerIds=").concat(n,"&")}),""),e.next=6,fetch("".concat(a,"/api/Invoices/GetInvoicesForCustomers?").concat(c),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){console.log(e),t=[]}));case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return D.apply(this,arguments)}function D(){return(D=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,e.next=3,fetch("".concat(a,"/api/Invoices/").concat(n,"/Delete"),{mode:"cors",method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},Cache:"default"}).then((function(e){if(e.ok){if(204===e.status)return null;if(200===e.status)return e.json();throw new Error("Unexpected status code: ".concat(e.status))}throw new Error("Network response was not ok")})).then((function(e){console.log("Deleted successfuly")})).catch((function(e){console.log(e),t=!1}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},49104:function(e,n,t){t(72791),t(69931),t(27216),t(96349),t(80184)},79597:function(e,n,t){t.r(n),t.d(n,{default:function(){return W}});var r=t(6907),c=t(74165),o=t(15861),a=t(29439),s=t(72791),u=t(69931),i=t(13967),l=t(57621),p=t(79836),f=t(89164),h=t(53382),d=t(39281),m=t(38072),x=t(19208),v=t(47974),Z=t(60720),y=t(50933),g=(t(49104),t(20302)),w=t(91617),j=t(1382),b=(t(91590),t(36314)),k=t(58406),C=t(62861),D=t(77196),I=t(68096),P=t(82626),S=t(13034),E=(t(27216),t(80184));function A(e){var n=e.onChange,t=e.customers,r=(e.handleOpen,e.selectedCustomers),c=(0,s.useState)([]),o=(0,a.Z)(c,2),i=o[0],l=o[1],p=(0,s.useRef)(i),f=(0,u.nt)(),h=f.t;f.currentLang;return(0,E.jsx)(b.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},justifyContent:"flex-end",direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:(0,E.jsxs)(I.Z,{sx:{flexShrink:0,width:{xs:1,md:180}},children:[(0,E.jsx)(C.Z,{children:"Customers List"}),(0,E.jsx)(k.Z,{multiple:!0,value:r,onChange:function(e){var r=t.map((function(e){return e.id})),c=e.target.value,o=c.length-1;console.log(c),"0"===c[o]?(l(r),n(r),p.current=r):"0"===c[0]?(l(c.slice(1)),n(c.slice(1)),p.current=c.slice(1)):p.current.length&&"0"===p.current.slice()[0]?(l([]),n([]),p.current=[]):(l(c),n(c),p.current=c)},input:(0,E.jsx)(D.Z,{label:"Customers List"}),renderValue:function(e){return e},sx:{textTransform:"capitalize"},children:t.map((function(e,n){return(0,E.jsxs)(P.Z,{value:e.id,selected:!0,children:[(0,E.jsx)(S.Z,{disableRipple:!0,size:"small",checked:r.includes(e.id)}),0===n?(t="all",h(t)):e.customerNameAr]},n);var t}))})]})})}var T=t(16386),N=t(9195),H=t(68745),_=t(60220),F=t(49900),B=t(4567);function L(e){var n=e.row,t=e.selected,r=(e.isPercentage,n.id,n.invoiceNo,n.issueInvoiceDate),c=n.invoiceAmount,o=n.daysToCollected,a=n.customerNameEn,s=n.paidStatus,u=n.department;return(0,E.jsxs)(N.Z,{hover:!0,selected:t,children:[(0,E.jsxs)(H.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,E.jsx)(_.Z,{alt:a,sx:{mr:2},children:a.charAt(0).toUpperCase()}),(0,E.jsx)(F.Z,{disableTypography:!0,primary:(0,E.jsx)(B.Z,{variant:"body2",noWrap:!0,children:a})})]}),(0,E.jsx)(H.Z,{children:(0,E.jsx)(F.Z,{primary:(0,T.Z)(new Date(r),"dd MMM yyyy"),secondary:(0,T.Z)(new Date(r),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),(0,E.jsx)(H.Z,{children:o}),(0,E.jsxs)(H.Z,{children:["$",c]}),(0,E.jsx)(H.Z,{align:"center",children:s}),(0,E.jsx)(H.Z,{align:"center",children:u})]})}var z={name:"",startDate:null,endDate:null};function R(){(0,i.Z)();var e=(0,Z.K$)(),n=((0,x.tv)(),(0,u.nt)().t),t=function(e){return n(e)},r=(0,j.x6)({defaultOrderBy:"issueInvoiceDate"}),b=(0,s.useState)([]),k=(0,a.Z)(b,2),C=k[0],D=k[1],I=(0,s.useState)([]),P=(0,a.Z)(I,2),S=P[0],T=P[1],N=(0,s.useState)(""),H=(0,a.Z)(N,2),_=(H[0],H[1],(0,s.useState)([])),F=(0,a.Z)(_,2),B=F[0],R=F[1],W=(0,s.useState)(!1),O=(0,a.Z)(W,2),U=(O[0],O[1]);(0,s.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.PH)();case 3:n=e.sent,T(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,s.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,w.m3)(B);case 3:n=e.sent,D(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[B]);var q=(0,s.useState)(z),G=(0,a.Z)(q,2),J=G[0],M=(G[1],!(!J.startDate||!J.endDate)&&J.startDate.getTime()>J.endDate.getTime()),$=function(e){var n=e.inputData;e.comparator,e.filters,e.dateError;return console.log(n),n}({inputData:C,comparator:(0,j.sQ)(r.order,r.orderBy),filters:J,dateError:M}),K=(r.dense,!!J.name||!!J.startDate&&!!J.endDate),Q=!$.length&&K||!$.length,V=[{id:"invoiceNumber",label:t("invoiceNumber")},{id:"issueInvoiceDate",label:t("issueInvoiceDate")},{id:"daysToCollected",label:t("daysToCollected")},{id:"invoiceAmount",label:t("invoiceAmount")},{id:"paidStatus",label:t("paidStatus"),align:"center"},{id:"department",label:t("department"),align:"center"}];return(0,E.jsxs)(f.Z,{maxWidth:!e.themeStretch&&"lg",children:[(0,E.jsx)(y.Z,{heading:t("invoicesForCustomer"),links:[{name:t("app"),href:m.H.dashboard.root},{name:t("reports")},{name:t("invoicesForCustomer")}],sx:{mb:{xs:3,md:5}}}),(0,E.jsxs)(l.Z,{sx:{mb:3},children:[(0,E.jsx)(A,{handleOpen:function(){return U(!0)},customers:S,selectedCustomers:B,onChange:function(e){return R(e)}}),(0,E.jsx)(d.Z,{sx:{position:"relative",overflow:"unset"},children:(0,E.jsx)(v.Z,{children:(0,E.jsxs)(p.Z,{size:r.dense?"small":"medium",sx:{minWidth:800},children:[(0,E.jsx)(j.K,{order:r.order,orderBy:r.orderBy,headLabel:V,rowCount:C.length,numSelected:r.selected.length,onSort:r.onSort}),(0,E.jsxs)(h.Z,{children:[$.length>0&&$.slice(r.page*r.rowsPerPage,r.page*r.rowsPerPage+r.rowsPerPage).map((function(e,n){return(0,E.jsx)(L,{row:e,selected:r.selected.includes(e.id)},n)})),(0,E.jsx)(j.et,{notFound:Q})]})]})})}),(0,E.jsx)(j.S_,{count:$.length||0,page:r.page,rowsPerPage:r.rowsPerPage,onPageChange:r.onChangePage,onRowsPerPageChange:r.onChangeRowsPerPage,dense:r.dense,onChangeDense:r.onChangeDense})]})]})}function W(){return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(r.ql,{children:(0,E.jsx)("title",{children:" Invoice For Customers Report"})}),(0,E.jsx)(R,{})]})}}}]);
//# sourceMappingURL=9597.b005d845.chunk.js.map