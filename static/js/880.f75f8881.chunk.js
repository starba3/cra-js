"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[880],{20302:function(e,n,t){t.d(n,{J:function(){return o},Z:function(){return s}});var r=t(74165),c=t(15861);function o(){return a.apply(this,arguments)}function a(){return(a=(0,c.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("https://invoicecollectionsystemapi.azurewebsites.net/customer",{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return i.apply(this,arguments)}function i(){return(i=(0,c.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("https://invoicecollectionsystemapi.azurewebsites.net/api/User/UsersNameByRole/sales",{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},91617:function(e,n,t){t.d(n,{Ag:function(){return f},DW:function(){return j},ES:function(){return p},G_:function(){return y},OX:function(){return v},ZN:function(){return Z},iJ:function(){return x},kT:function(){return m},m3:function(){return w},qL:function(){return s},zJ:function(){return u}});var r=t(74165),c=t(15861),o=(t(763),t(38072)),a="https://invoicecollectionsystemapi.azurewebsites.net";function s(){return i.apply(this,arguments)}function i(){return(i=(0,c.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(a,"/api/invoices"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return(l=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("".concat(a,"/api/Invoices/Department/").concat(n),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return(d=(0,c.Z)((0,r.Z)().mark((function e(n){var t,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],c="",c=n?"".concat(a,"/api/Invoices/GetInvoicesBySalesConfirmation?salesConfirm=").concat(n):"".concat(a,"/api/Invoices/NotConfirmedBySales"),e.next=5,fetch(c,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=(0,c.Z)((0,r.Z)().mark((function e(n){var t,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(a,"/api/invoices/").concat(n),{mode:"cors"});case 3:if(!(t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:console.error("Failed to fetch invoice: ".concat(t.status," - ").concat(t.statusText)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:return e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function m(e,n){var t="";switch(e){case-1:case 0:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/Operation");break;case 1:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/installation");break;case 2:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/Sales");break;case 3:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/Collection");break;case 4:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/TenderAndContracts")}return t}function x(e){var n="";switch(e){case-1:case 0:n=o.H.departments.operation.list;break;case 1:n=o.H.departments.installation.list;break;case 2:n=o.H.departments.sales.list;break;case 3:n=o.H.departments.collection.list;break;case 4:n=o.H.departments.tenderAndConract.list}return n}function v(){return"".concat(a,"/api/ExcelImport/import-invoices")}function Z(e){return"".concat(a,"/api/Attachments/").concat(e)}function y(){return g.apply(this,arguments)}function g(){return(g=(0,c.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(a,"/api/CollectionData"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return b.apply(this,arguments)}function b(){return(b=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},console.log("".concat(a,"/api/Invoices/").concat(n,"/Inquiry")),e.next=4,fetch("".concat(a,"/api/Invoices/").concat(n,"/Inquiry"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return C.apply(this,arguments)}function C(){return(C=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,fetch("".concat(a,"/api/Invoices/GetInvoicesForCustomers?customerIds=").concat(n),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){console.log(e),t=[]}));case 5:return console.log("Result: ",t),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},73894:function(e,n,t){t(72791);var r=t(13496),c=t(80184);n.Z=function(e){var n=e.data,t=n.map((function(e){return e.zeroToThirty})),o=n.map((function(e){return e.thirtyOneToSixty})),a=n.map((function(e){return e.sixtyOneToNinety})),s=n.map((function(e){return e.ninetyOneToOneTwenty})),i=n.map((function(e){return e.oneTwentyOnePlus})),u=[t.reduce((function(e,n){return e+n}),0),o.reduce((function(e,n){return e+n}),0),a.reduce((function(e,n){return e+n}),0),s.reduce((function(e,n){return e+n}),0),i.reduce((function(e,n){return e+n}),0)];return(0,c.jsx)(r.Z,{options:{labels:["0-30","31-60","61-90","91-120","120+"]},series:u,type:"donut",width:"380"})}},90880:function(e,n,t){t.r(n),t.d(n,{default:function(){return J}});var r=t(6907),c=t(74165),o=t(15861),a=t(29439),s=t(72791),i=t(13967),u=t(57621),l=t(79836),p=t(89164),d=t(53382),f=t(39281),h=t(38072),m=t(19208),x=t(47974),v=t(60720),Z=t(50933),y=(t(73894),t(4942)),g=t(36314),j=t(5574),b=t(48550),w=t(4567),C=t(63466),k=t(76278),I=t(34065),D=(t(80160),t(27216)),S=t(96349),P=t(80184);function T(e){var n=e.title,t=void 0===n?"Address Book":n,r=e.list,c=e.action,o=e.open,i=e.onClose,u=e.selected,l=e.onSelect,p=(0,s.useState)(""),d=(0,a.Z)(p,2),f=d[0],h=d[1],m=(0,s.useState)([""]),x=(0,a.Z)(m,2),v=(x[0],x[1],function(e){var n=e.inputData,t=e.query;if(t)return n.filter((function(e){return-1!==e.customerCode.toLowerCase().indexOf(t.toLowerCase())||-1!==e.customerNameEn.toLowerCase().indexOf(t.toLowerCase())||-1!==e.customerNameAr.toLowerCase().indexOf(t.toLowerCase())}));return n}({inputData:r,query:f})),Z=!v.length&&!!f,T=(0,s.useCallback)((function(e){h(e.target.value)}),[]),E=(0,s.useCallback)((function(e){l(e),h(""),i()}),[i,l]),N=(0,P.jsx)(g.Z,{spacing:.5,sx:{p:.5,maxHeight:640,overflowX:"hidden"},children:v.map((function(e,n){return(0,P.jsxs)(g.Z,{spacing:.5,component:k.Z,selected:u("".concat(e.id)),onClick:function(){return E(e)},sx:(0,y.Z)({py:1,px:1.5,borderRadius:1,flexDirection:"column",alignItems:"flex-start"},"&.".concat(I.Z.selected),{bgcolor:"action.selected","&:hover":{bgcolor:"action.selected"}}),children:[(0,P.jsx)(g.Z,{direction:"row",alignItems:"center",spacing:1,children:(0,P.jsxs)(w.Z,{variant:"subtitle2",children:["Code: ",e.customerCode]})}),(0,P.jsxs)(w.Z,{variant:"body2",sx:{color:"text.secondary"},children:["Name ENglish: ",e.customerNameEn]}),(0,P.jsxs)(w.Z,{variant:"body2",sx:{color:"text.secondary"},children:["Name Arabic: ",e.customerNameAr]})]},n)}))});return(0,P.jsxs)(j.Z,{fullWidth:!0,maxWidth:"xs",open:o,onClose:i,children:[(0,P.jsx)(g.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:3,pr:1.5},children:(0,P.jsxs)(w.Z,{variant:"h6",children:[" ",t," "]})}),(0,P.jsx)(g.Z,{sx:{p:2,pt:0},children:(0,P.jsx)(b.Z,{value:f,onChange:T,placeholder:"Search...",InputProps:{startAdornment:(0,P.jsx)(C.Z,{position:"start",children:(0,P.jsx)(D.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),Z?(0,P.jsx)(S.Z,{query:f,sx:{px:3,pt:5,pb:10}}):N,c&&c]})}var E=t(20302),N=t(91617),A=t(1382),O=(t(91590),t(5849));t(52115);function _(e){e.onChange,e.customers;var n=e.handleOpen;return(0,P.jsx)(g.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},justifyContent:"flex-end",direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:(0,P.jsxs)(O.Z,{onClick:n,children:[(0,P.jsx)(D.Z,{icon:"ic:twotone-list"}),"Select User"]})})}var B=t(16386),L=t(9195),q=t(68745),F=t(60220),H=t(49900);function R(e){var n=e.row,t=e.selected,r=(e.isPercentage,n.id,n.invoiceNo,n.issueInvoiceDate),c=n.invoiceAmount,o=n.daysToCollected,a=n.customerNameEn,s=n.paidStatus,i=n.department;return(0,P.jsxs)(L.Z,{hover:!0,selected:t,children:[(0,P.jsxs)(q.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,P.jsx)(F.Z,{alt:a,sx:{mr:2},children:a.charAt(0).toUpperCase()}),(0,P.jsx)(H.Z,{disableTypography:!0,primary:(0,P.jsx)(w.Z,{variant:"body2",noWrap:!0,children:a})})]}),(0,P.jsx)(q.Z,{children:(0,P.jsx)(H.Z,{primary:(0,B.Z)(new Date(r),"dd MMM yyyy"),secondary:(0,B.Z)(new Date(r),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),(0,P.jsx)(q.Z,{children:o}),(0,P.jsxs)(q.Z,{children:["$",c]}),(0,P.jsx)(q.Z,{align:"center",children:s}),(0,P.jsx)(q.Z,{align:"center",children:i})]})}var W={name:"",startDate:null,endDate:null};function z(){(0,i.Z)();var e=(0,v.K$)(),n=((0,m.tv)(),(0,A.x6)({defaultOrderBy:"issueInvoiceDate"})),t=(0,s.useState)([]),r=(0,a.Z)(t,2),y=r[0],g=r[1],j=(0,s.useState)([]),b=(0,a.Z)(j,2),w=b[0],C=b[1],k=(0,s.useState)(""),I=(0,a.Z)(k,2),D=I[0],S=I[1],O=(0,s.useState)(!1),B=(0,a.Z)(O,2),L=B[0],q=B[1];(0,s.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,E.J)();case 3:n=e.sent,C(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,s.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,N.m3)(D);case 3:n=e.sent,g(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[D]);var F=(0,s.useState)(W),H=(0,a.Z)(F,2),z=H[0],J=(H[1],!(!z.startDate||!z.endDate)&&z.startDate.getTime()>z.endDate.getTime()),U=function(e){var n=e.inputData;e.comparator,e.filters,e.dateError;return console.log(n),n}({inputData:y,comparator:(0,A.sQ)(n.order,n.orderBy),filters:z,dateError:J}),G=(n.dense,!!z.name||!!z.startDate&&!!z.endDate),M=!U.length&&G||!U.length;return(0,P.jsxs)(p.Z,{maxWidth:!e.themeStretch&&"lg",children:[(0,P.jsx)(Z.Z,{heading:"Invoices For Customers",links:[{name:"Dashboard",href:h.H.dashboard.root},{name:"Reports"},{name:"Invoices For Customers"}],sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(u.Z,{sx:{mb:3},children:[(0,P.jsx)(_,{handleOpen:function(){return q(!0)}}),(0,P.jsx)(f.Z,{sx:{position:"relative",overflow:"unset"},children:(0,P.jsx)(x.Z,{children:(0,P.jsxs)(l.Z,{size:n.dense?"small":"medium",sx:{minWidth:800},children:[(0,P.jsx)(A.K,{order:n.order,orderBy:n.orderBy,headLabel:[{id:"invoiceNumber",label:"Invoice Number"},{id:"issueInvoiceDate",label:"Issue Date"},{id:"daysToCollected",label:"Days To Collect"},{id:"invoiceAmount",label:"Amount"},{id:"paidStatus",label:"Paid Status",align:"center"},{id:"department",label:"Department",align:"center"}],rowCount:y.length,numSelected:n.selected.length,onSort:n.onSort}),(0,P.jsxs)(d.Z,{children:[U.length>0&&U.slice(n.page*n.rowsPerPage,n.page*n.rowsPerPage+n.rowsPerPage).map((function(e,t){return(0,P.jsx)(R,{row:e,selected:n.selected.includes(e.id)},t)})),(0,P.jsx)(A.et,{notFound:M})]})]})})}),(0,P.jsx)(A.S_,{count:U.length||0,page:n.page,rowsPerPage:n.rowsPerPage,onPageChange:n.onChangePage,onRowsPerPageChange:n.onChangeRowsPerPage,dense:n.dense,onChangeDense:n.onChangeDense})]}),(0,P.jsx)(T,{title:"Customers",list:w,open:L,onClose:function(){return q(!1)},selected:function(e){return D===e},onSelect:function(e){return S(e.id)}})]})}function J(){return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(r.ql,{children:(0,P.jsx)("title",{children:" Invoice For Customers Report"})}),(0,P.jsx)(z,{})]})}}}]);
//# sourceMappingURL=880.f75f8881.chunk.js.map