"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[4926],{91617:function(e,n,t){t.d(n,{Ag:function(){return f},DW:function(){return w},ES:function(){return p},G_:function(){return y},OX:function(){return v},Wu:function(){return k},ZN:function(){return Z},iJ:function(){return m},kT:function(){return x},m3:function(){return b},qL:function(){return s},zJ:function(){return u}});var r=t(74165),c=t(15861),o=(t(763),t(38072)),a="https://invoicecollectionsystemapi.azurewebsites.net";function s(){return i.apply(this,arguments)}function i(){return(i=(0,c.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(a,"/api/invoices"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return(l=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("".concat(a,"/api/Invoices/Department/").concat(n),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return(d=(0,c.Z)((0,r.Z)().mark((function e(n){var t,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],c="",c=n?"".concat(a,"/api/Invoices/GetInvoicesBySalesConfirmation?salesConfirm=").concat(n):"".concat(a,"/api/Invoices/NotConfirmedBySales"),e.next=5,fetch(c,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=(0,c.Z)((0,r.Z)().mark((function e(n){var t,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(a,"/api/invoices/").concat(n),{mode:"cors"});case 3:if(!(t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:console.error("Failed to fetch invoice: ".concat(t.status," - ").concat(t.statusText)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:return e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function x(e,n){var t="";switch(e){case-1:case 0:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/Operation");break;case 1:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/installation");break;case 2:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/Sales");break;case 3:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/Collection");break;case 4:t="".concat(a,"/api/Invoices/").concat(n,"/Edit/TenderAndContracts")}return t}function m(e){var n="";switch(e){case-1:case 0:n=o.H.departments.operation.list;break;case 1:n=o.H.departments.installation.list;break;case 2:n=o.H.departments.sales.list;break;case 3:n=o.H.departments.collection.list;break;case 4:n=o.H.departments.tenderAndConract.list}return n}function v(){return"".concat(a,"/api/ExcelImport/import-invoices")}function Z(e){return"".concat(a,"/api/Attachments/").concat(e)}function y(){return g.apply(this,arguments)}function g(){return(g=(0,c.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(a,"/api/CollectionData"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return j.apply(this,arguments)}function j(){return(j=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},console.log("".concat(a,"/api/Invoices/").concat(n,"/Inquiry")),e.next=4,fetch("".concat(a,"/api/Invoices/").concat(n,"/Inquiry"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return C.apply(this,arguments)}function C(){return(C=(0,c.Z)((0,r.Z)().mark((function e(n){var t,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n){e.next=3;break}return e.abrupt("return",t);case 3:return c=n.reduce((function(e,n){return"".concat(e,"customerIds=").concat(n,"&")}),""),e.next=6,fetch("".concat(a,"/api/Invoices/GetInvoicesForCustomers?").concat(c),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){console.log(e),t=[]}));case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return I.apply(this,arguments)}function I(){return(I=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,e.next=3,fetch("".concat(a,"/api/Invoices/").concat(n,"/Delete"),{mode:"cors",method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},Cache:"default"}).then((function(e){if(e.ok){if(204===e.status)return null;if(200===e.status)return e.json();throw new Error("Unexpected status code: ".concat(e.status))}throw new Error("Network response was not ok")})).then((function(e){console.log("Deleted successfuly")})).catch((function(e){console.log(e),t=!1}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},22260:function(e,n,t){t.d(n,{AW:function(){return u},Eq:function(){return s},Fo:function(){return f},fx:function(){return p}});var r=t(93433),c=t(74165),o=t(15861),a="https://invoicecollectionsystemapi.azurewebsites.net";function s(e){return i.apply(this,arguments)}function i(){return(i=(0,o.Z)((0,c.Z)().mark((function e(n){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("".concat(a,"/api/User/UsersNameByRole/").concat(n),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return l.apply(this,arguments)}function l(){return(l=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(a,"/api/User"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return(d=(0,o.Z)((0,c.Z)().mark((function e(n){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("".concat(a,"/api/Invoices/GetInvoicesForUser?User=").concat(n),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return h.apply(this,arguments)}function h(){return(h=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{id:"0",name:"All"}],e.next=3,fetch("".concat(a,"/api/User/roles"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n.push.apply(n,(0,r.Z)(e))})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},49104:function(e,n,t){t(72791),t(69931),t(27216),t(96349),t(80184)},24926:function(e,n,t){t.r(n),t.d(n,{default:function(){return G}});var r=t(6907),c=t(74165),o=t(15861),a=t(29439),s=t(72791),i=t(69931),u=t(13967),l=t(57621),p=t(79836),d=t(89164),f=t(53382),h=t(39281),x=t(38072),m=t(19208),v=t(47974),Z=t(60720),y=t(50933),g=(t(49104),t(22260)),w=(t(91617),t(1382)),j=(t(91590),t(36314)),b=t(5849),C=t(27216),k=t(80184);function I(e){e.onChange,e.users;var n,t=e.handleOpen,r=(e.selectedCustomers,(0,i.nt)().t);return(0,k.jsx)(j.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},justifyContent:"flex-end",direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:(0,k.jsx)(b.Z,{variant:"contained",color:"success",endIcon:(0,k.jsx)(C.Z,{icon:"mdi:search"}),onClick:t,children:(n="searchUsers",r(n))})})}var D=t(16386),N=t(50533),S=t(9195),P=t(68745),E=t(60220),A=t(49900),U=t(4567);function B(e){var n=e.row,t=e.selected,r=e.onViewRow,c=(e.isPercentage,n.id,n.invoiceNo),o=n.issueInvoiceDate,a=n.invoiceAmount,s=n.daysToCollected,u=n.customerNameEn,l=n.customerNameAr,p=n.productNameEn,d=n.productNameAr,f=n.paidStatus,h=n.department,x=(0,i.nt)().currentLang,m="ar"===x.value?l:u,v="ar"===x.value?d:p;return(0,k.jsxs)(S.Z,{hover:!0,selected:t,children:[(0,k.jsxs)(P.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,k.jsx)(E.Z,{alt:m,sx:{mr:2},children:m.charAt(0).toUpperCase()}),(0,k.jsx)(A.Z,{disableTypography:!0,primary:(0,k.jsx)(U.Z,{variant:"body2",noWrap:!0,children:m}),secondary:(0,k.jsx)(N.Z,{noWrap:!0,variant:"body2",onClick:r,sx:{color:"text.disabled",cursor:"pointer"},children:c})})]}),(0,k.jsx)(P.Z,{children:(0,k.jsx)(A.Z,{primary:(0,D.Z)(new Date(o),"dd MMM yyyy"),secondary:(0,D.Z)(new Date(o),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),(0,k.jsx)(P.Z,{children:s}),(0,k.jsxs)(P.Z,{children:["$",a]}),(0,k.jsx)(P.Z,{children:v}),(0,k.jsx)(P.Z,{align:"center",children:f}),(0,k.jsx)(P.Z,{align:"center",children:h})]})}var T=t(4942),W=t(5574),H=t(48550),_=t(63466),L=t(76278),q=t(34065),O=t(96349);function R(e){var n=e.title,t=void 0===n?"Address Book":n,r=e.list,c=e.action,o=e.open,u=e.onClose,l=e.selected,p=e.onSelect,d=(0,s.useState)(""),f=(0,a.Z)(d,2),h=f[0],x=f[1],m=(0,s.useState)([""]),v=(0,a.Z)(m,2),Z=(v[0],v[1],function(e){var n=e.inputData,t=e.query;if(t)return n.filter((function(e){return-1!==e.firstName.toLowerCase().indexOf(t.toLowerCase())||-1!==e.lastName.toLowerCase().indexOf(t.toLowerCase())||-1!==e.userName.toLowerCase().indexOf(t.toLowerCase())}));return n}({inputData:r,query:h})),y=(0,i.nt)().t,g=function(e){return y(e)},w=!Z.length&&!!h,b=(0,s.useCallback)((function(e){x(e.target.value)}),[]),I=(0,s.useCallback)((function(e){p(e),x(""),u()}),[u,p]),D=(0,k.jsx)(j.Z,{spacing:.5,sx:{p:.5,maxHeight:640,overflowX:"hidden"},children:Z.map((function(e,n){return(0,k.jsxs)(j.Z,{spacing:.5,component:L.Z,selected:l("".concat(e.id)),onClick:function(){return I(e)},sx:(0,T.Z)({py:1,px:1.5,borderRadius:1,flexDirection:"column",alignItems:"flex-start"},"&.".concat(q.Z.selected),{bgcolor:"action.selected","&:hover":{bgcolor:"action.selected"}}),children:[(0,k.jsx)(j.Z,{direction:"row",alignItems:"center",spacing:1,children:(0,k.jsxs)(U.Z,{variant:"subtitle2",children:[g("code"),": ",e.customerCode]})}),(0,k.jsxs)(U.Z,{variant:"body2",sx:{color:"text.secondary"},children:[g("firstName"),": ",e.firstName]}),(0,k.jsxs)(U.Z,{variant:"body2",sx:{color:"text.secondary"},children:[g("lastName"),": ",e.lastName]}),(0,k.jsxs)(U.Z,{variant:"body2",sx:{color:"text.secondary"},children:[g("userName"),": ",e.userName]})]},n)}))});return(0,k.jsxs)(W.Z,{fullWidth:!0,maxWidth:"xs",open:o,onClose:u,children:[(0,k.jsx)(j.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:3,pr:1.5},children:(0,k.jsxs)(U.Z,{variant:"h6",children:[" ",t," "]})}),(0,k.jsx)(j.Z,{sx:{p:2,pt:0},children:(0,k.jsx)(H.Z,{value:h,onChange:b,placeholder:g("searchCustomer"),InputProps:{startAdornment:(0,k.jsx)(_.Z,{position:"start",children:(0,k.jsx)(C.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),w?(0,k.jsx)(O.Z,{query:h,sx:{px:3,pt:5,pb:10}}):D,c&&c]})}var F={name:"",startDate:null,endDate:null};function z(){(0,u.Z)();var e=(0,Z.K$)(),n=(0,m.tv)(),t=(0,i.nt)().t,r=function(e){return t(e)},j=(0,w.x6)({defaultOrderBy:"issueInvoiceDate"}),b=(0,s.useState)([]),C=(0,a.Z)(b,2),D=C[0],N=C[1],S=(0,s.useState)([]),P=(0,a.Z)(S,2),E=P[0],A=P[1],U=(0,s.useState)({}),T=(0,a.Z)(U,2),W=T[0],H=T[1],_=(0,s.useState)([]),L=(0,a.Z)(_,2),q=L[0],O=L[1],z=(0,s.useState)(!1),G=(0,a.Z)(z,2),M=G[0],J=G[1];(0,s.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.AW)();case 3:n=e.sent,console.log("Result: ",n),A(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,s.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.fx)(W.id);case 3:n=e.sent,N(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[W]);var K=(0,s.useState)(F),V=(0,a.Z)(K,2),X=V[0],$=(V[1],!(!X.startDate||!X.endDate)&&X.startDate.getTime()>X.endDate.getTime()),Q=function(e){var n=e.inputData;e.comparator,e.filters,e.dateError;return console.log(n),n}({inputData:D,comparator:(0,w.sQ)(j.order,j.orderBy),filters:X,dateError:$}),Y=(0,s.useCallback)((function(e){n.push(x.H.dashboard.invoice.details(e))}),[n]),ee=(j.dense,!!X.name||!!X.startDate&&!!X.endDate),ne=!Q.length&&ee||!Q.length,te=[{id:"invoiceNumber",label:r("invoiceNumber")},{id:"issueInvoiceDate",label:r("issueInvoiceDate")},{id:"daysToCollected",label:r("daysToCollected")},{id:"invoiceAmount",label:r("invoiceAmount")},{id:"productName",label:r("productName")},{id:"paidStatus",label:r("paidStatus"),align:"center"},{id:"department",label:r("department"),align:"center"}];return(0,k.jsxs)(d.Z,{maxWidth:!e.themeStretch&&"lg",children:[(0,k.jsx)(y.Z,{heading:r("invoiceByUser"),links:[{name:r("app"),href:x.H.dashboard.root},{name:r("invoiceByUser"),href:x.H.reports.invoiceByUsers},{name:r("invoiceByUser")}],sx:{mb:{xs:3,md:5}}}),(0,k.jsxs)(l.Z,{sx:{mb:3},children:[(0,k.jsx)(I,{handleOpen:function(){return J(!0)},users:E,selectedCustomers:q,onChange:function(e){return O(e)}}),(0,k.jsx)(h.Z,{sx:{position:"relative",overflow:"unset"},children:(0,k.jsx)(v.Z,{children:(0,k.jsxs)(p.Z,{size:j.dense?"small":"medium",sx:{minWidth:800},children:[(0,k.jsx)(w.K,{order:j.order,orderBy:j.orderBy,headLabel:te,rowCount:D.length,numSelected:j.selected.length,onSort:j.onSort}),(0,k.jsxs)(f.Z,{children:[Q.length>0&&Q.slice(j.page*j.rowsPerPage,j.page*j.rowsPerPage+j.rowsPerPage).map((function(e,n){return(0,k.jsx)(B,{row:e,onViewRow:function(){return Y(e.id)},selected:j.selected.includes(e.id)},n)})),(0,k.jsx)(w.et,{notFound:ne})]})]})})}),(0,k.jsx)(w.S_,{count:Q.length||0,page:j.page,rowsPerPage:j.rowsPerPage,onPageChange:j.onChangePage,onRowsPerPageChange:j.onChangeRowsPerPage,dense:j.dense,onChangeDense:j.onChangeDense})]}),(0,k.jsx)(R,{title:r("customers"),list:E,open:M,onClose:function(){return J(!1)},selected:function(e){return W===e},onSelect:function(e){return H(e)}})]})}function G(){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(r.ql,{children:(0,k.jsx)("title",{children:" Invoice By Users Report"})}),(0,k.jsx)(z,{})]})}}}]);
//# sourceMappingURL=4926.1fdf0104.chunk.js.map