"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[2435],{20302:function(e,t,n){n.d(t,{J:function(){return a},Z:function(){return s}});var r=n(74165),o=n(15861);function a(){return i.apply(this,arguments)}function i(){return(i=(0,o.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("https://invoicecollectionsystemapi.azurewebsites.net/customer",{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return l.apply(this,arguments)}function l(){return(l=(0,o.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("https://invoicecollectionsystemapi.azurewebsites.net/api/User/UsersNameByRole/sales",{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},41557:function(e,t,n){n.d(t,{b:function(){return a},j:function(){return i}});var r=n(80831),o=function(e){return(0,(0,r.Z)().t)(e)},a=function(){return[o("All"),o("Operation"),o("Sales"),o("Installation"),o("Collection"),o("TenderAndContracts")]},i=function(){return[o("Operation"),o("Installation"),o("Sales"),o("Collection"),o("TenderAndContracts")]}},16568:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(4942),o=n(29439),a=n(72791),i=n(36314),s=n(5574),l=n(48550),c=n(4567),u=n(63466),d=n(76278),x=n(34065),h=(n(80160),n(27216)),p=n(96349),f=n(80184);function v(e){var t=e.title,n=void 0===t?"Address Book":t,v=e.list,m=e.action,Z=e.open,j=e.onClose,g=e.selected,b=e.onSelect,y=(0,a.useState)(""),S=(0,o.Z)(y,2),w=S[0],C=S[1],D=function(e){var t=e.inputData,n=e.query;if(n)return t.filter((function(e){return-1!==e.customerCode.toLowerCase().indexOf(n.toLowerCase())||-1!==e.customerNameEn.toLowerCase().indexOf(n.toLowerCase())||-1!==e.customerNameAr.toLowerCase().indexOf(n.toLowerCase())}));return t}({inputData:v,query:w}),k=!D.length&&!!w,N=(0,a.useCallback)((function(e){C(e.target.value)}),[]),I=(0,a.useCallback)((function(e){b(e),C(""),j()}),[j,b]),T=(0,f.jsx)(i.Z,{spacing:.5,sx:{p:.5,maxHeight:640,overflowX:"hidden"},children:D.map((function(e){return(0,f.jsxs)(i.Z,{spacing:.5,component:d.Z,selected:g("".concat(e.id)),onClick:function(){return I(e)},sx:(0,r.Z)({py:1,px:1.5,borderRadius:1,flexDirection:"column",alignItems:"flex-start"},"&.".concat(x.Z.selected),{bgcolor:"action.selected","&:hover":{bgcolor:"action.selected"}}),children:[(0,f.jsx)(i.Z,{direction:"row",alignItems:"center",spacing:1,children:(0,f.jsxs)(c.Z,{variant:"subtitle2",children:["Code: ",e.customerCode]})}),(0,f.jsxs)(c.Z,{variant:"body2",sx:{color:"text.secondary"},children:["Name ENglish: ",e.customerNameEn]}),(0,f.jsxs)(c.Z,{variant:"body2",sx:{color:"text.secondary"},children:["Name Arabic: ",e.customerNameAr]})]},e.id)}))});return(0,f.jsxs)(s.Z,{fullWidth:!0,maxWidth:"xs",open:Z,onClose:j,children:[(0,f.jsxs)(i.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:3,pr:1.5},children:[(0,f.jsxs)(c.Z,{variant:"h6",children:[" ",n," "]}),m&&m]}),(0,f.jsx)(i.Z,{sx:{p:2,pt:0},children:(0,f.jsx)(l.Z,{value:w,onChange:N,placeholder:"Search...",InputProps:{startAdornment:(0,f.jsx)(u.Z,{position:"start",children:(0,f.jsx)(h.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),k?(0,f.jsx)(p.Z,{query:w,sx:{px:3,pt:5,pb:10}}):T]})}},44070:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(4942),o=n(29439),a=n(72791),i=n(36314),s=n(5574),l=n(48550),c=n(4567),u=n(63466),d=n(76278),x=n(34065),h=(n(80160),n(27216)),p=n(96349),f=n(80184);function v(e){var t=e.title,n=void 0===t?"Address Book":t,v=e.list,m=e.action,Z=e.open,j=e.onClose,g=e.selected,b=e.onSelect,y=(0,a.useState)(""),S=(0,o.Z)(y,2),w=S[0],C=S[1],D=function(e){var t=e.inputData,n=e.query;if(n)return t.filter((function(e){return-1!==e.username.toLowerCase().indexOf(n.toLowerCase())}));return t}({inputData:v,query:w}),k=!D.length&&!!w,N=(0,a.useCallback)((function(e){C(e.target.value)}),[]),I=(0,a.useCallback)((function(e){b(e),C(""),j()}),[j,b]),T=(0,f.jsx)(i.Z,{spacing:.5,sx:{p:.5,maxHeight:640,overflowX:"hidden"},children:D.map((function(e){return(0,f.jsx)(i.Z,{spacing:.5,component:d.Z,selected:g("".concat(e.id)),onClick:function(){return I(e)},sx:(0,r.Z)({py:1,px:1.5,borderRadius:1,flexDirection:"column",alignItems:"flex-start"},"&.".concat(x.Z.selected),{bgcolor:"action.selected","&:hover":{bgcolor:"action.selected"}}),children:(0,f.jsx)(i.Z,{direction:"row",alignItems:"center",spacing:1,children:(0,f.jsx)(c.Z,{variant:"subtitle2",textTransform:"bold",children:e.username})})},e.id)}))});return(0,f.jsxs)(s.Z,{fullWidth:!0,maxWidth:"xs",open:Z,onClose:j,children:[(0,f.jsxs)(i.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:3,pr:1.5},children:[(0,f.jsxs)(c.Z,{variant:"h6",children:[" ",n," "]}),m&&m]}),(0,f.jsx)(i.Z,{sx:{p:2,pt:0},children:(0,f.jsx)(l.Z,{value:w,onChange:N,placeholder:"Search...",InputProps:{startAdornment:(0,f.jsx)(u.Z,{position:"start",children:(0,f.jsx)(h.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),k?(0,f.jsx)(p.Z,{query:w,sx:{px:3,pt:5,pb:10}}):T]})}},44557:function(e,t,n){n.r(t),n.d(t,{default:function(){return he}});var r=n(6907),o=n(19208),a=n(74165),i=n(15861),s=n(29439),l=n(72791),c=n(89164),u=n(13239),d=(n(51175),n(38072)),x=n(91617),h=n(60720),p=n(50933),f=n(4942),v=n(1413),m=n(8007),Z=n(61134),j=n(44695),g=n(12258),b=n(57621),y=n(36314),S=n(5849),w=n(5574),C=n(97123),D=n(39157),k=n(51691),N=n(65661),I=n(41557),T=n(22459),L=n(39231),A=n(94721),E=n(48550),P=n(63466),O=n(4567),F=n(38887),_=(n(11908),n(27216)),W=n(20302),R=(n(16568),n(44070),n(80184));function B(e){e.currentInvoice;var t=(0,Z.Gc)(),n=t.control,r=t.watch,o=(t.setValue,t.formState.errors,(0,W.J)(),(0,W.Z)(),(0,F.F)("up","md")),a=r();a.customerId,a.customerCode,a.salesPerson,a.customerObj,a.salesPersonObj;return(0,R.jsxs)(y.Z,{spacing:{xs:3,md:5},direction:{xs:"column",md:"row"},divider:(0,R.jsx)(A.Z,{flexItem:!0,orientation:o?"vertical":"horizontal",sx:{borderStyle:"dashed"}}),sx:{p:3},children:[(0,R.jsxs)(y.Z,{sx:{width:1},children:[(0,R.jsx)(y.Z,{direction:"row",alignItems:"center",sx:{mb:1},children:(0,R.jsx)(O.Z,{variant:"h6",sx:{color:"text.disabled",flexGrow:1},children:"Attachment:"})}),(0,R.jsx)(E.Z,{type:"file",id:"file",label:"Upload File",variant:"outlined",inputProps:{accept:".xls, .xlsx"}})]}),(0,R.jsxs)(y.Z,{sx:{width:1},children:[(0,R.jsx)(y.Z,{direction:"row",alignItems:"center",sx:{mb:1},children:(0,R.jsx)(O.Z,{variant:"h6",sx:{color:"text.disabled",flexGrow:1},children:"New Note:"})}),(0,R.jsx)(Z.Qr,{name:"CreateNote",control:n,render:function(e){var t=e.field;return(0,R.jsx)(E.Z,{fullWidth:!0,value:t.value,onChange:function(e){t.onChange(e)},placeholder:"New Note here",InputProps:{startAdornment:(0,R.jsx)(P.Z,{position:"start",children:(0,R.jsx)(_.Z,{icon:"eva:search-fill",sx:{color:"text.add"}})})}})}})]})]})}var V=n(66934),q=n(53106),z=n(62861),M=n(68096),Q=n(77196),U=n(82626),G=n(58406),H=n(80831),J=function(e){return(0,(0,H.Z)().t)(e)},K=function(){return[J("None"),J("Acknowledged"),J("NotAcknowledged"),J("TempAcknowledged"),J("Reject")]},X=function(e){return(0,(0,H.Z)().t)(e)},$=function(){return[X("NotStarted"),X("InProgress"),X("Installed"),X("Delayed")]},Y=n(64554),ee=n(79836),te=n(9195),ne=n(56890),re=n(68745),oe=n(53382),ae=n(24308),ie=n(39281),se=n(80160),le=n(47974);function ce(e){var t=e.department,n=(e.filters,e.onFilters,e.departmentOptions),r=e.currentInvoice,o=(0,l.useState)(!0),c=(0,s.Z)(o,2),u=(c[0],c[1]),d=(0,l.useState)([]),h=(0,s.Z)(d,2),p=h[0],f=h[1],v=(0,l.useState)([]),m=(0,s.Z)(v,2),j=m[0],g=m[1],S=(0,l.useState)([]),w=(0,s.Z)(S,2),C=w[0],D=w[1],k=(0,l.useState)([]),N=(0,s.Z)(k,2),I=N[0],T=N[1];(0,l.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.G_)();case 3:t=e.sent,f(t),g(t.filter((function(e){return"Collection Source"===e.entityType}))),console.log(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching invoice:",e.t0);case 12:return e.prev=12,u(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var L=(0,Z.Gc)(),E=L.control,P=L.watch,F=L.resetField,_=L.setValue,W=(L.formState.errors,P()),B={deliveryDate:["operation"],department:["operation","sales","collection","tenderandcontracts"],acknowledgeStatuses:["operation","sales"],installationStatus:["installation"],installationDate:["installation"],collectionSource:["collection"],claimStatus:["collection"],claimsDetailStatus:["collection"]},H=function(e){var t=C.filter((function(t){return t.value===e}))[0].id;T(p.filter((function(e){return e.parentId===t})))},J=B.deliveryDate.includes(t.toLowerCase())?(0,R.jsx)(Z.Qr,{name:"DeliveryDate",control:E,render:function(e){var t=e.field,n=e.fieldState.error;return(0,R.jsx)(Y.Z,{sx:{width:"80%"},children:(0,R.jsx)(q.M,{label:"",value:t.value,onChange:function(e){t.onChange(e)},slotProps:{flex:1,textField:{fullWidth:!0,error:!!n,helperText:null===n||void 0===n?void 0:n.message}}})})}}):r.deliveryDate,X=B.department.includes(t.toLowerCase())?(0,R.jsxs)(M.Z,{sx:{flex:1,flexShrink:0,width:{xs:3,md:"80%"}},children:[(0,R.jsx)(z.Z,{}),(0,R.jsx)(Z.Qr,{name:"department",control:E,render:function(e){var t=e.field;return(0,R.jsx)(G.Z,{value:t.value,onChange:function(e){t.onChange(e)},input:(0,R.jsx)(Q.Z,{label:""}),renderValue:function(e){return e},sx:{textTransform:"capitalize",fullWidth:!0},children:n.map((function(e,t){return(0,R.jsx)(U.Z,{value:e,children:e},t)}))})}})]}):r.department,ce=B.acknowledgeStatuses.includes(t.toLowerCase())?(0,R.jsxs)(M.Z,{sx:{flex:1,flexShrink:0,width:{xs:3,md:"80%"}},children:[(0,R.jsx)(z.Z,{}),(0,R.jsx)(Z.Qr,{name:"acknowledgeStatus",control:E,render:function(e){var n=e.field;return(0,R.jsx)(G.Z,{value:n.value,onChange:function(e){n.onChange(e)},input:(0,R.jsx)(Q.Z,{label:""}),renderValue:function(e){return e},sx:{textTransform:"capitalize",fullWidth:!0},children:K().map((function(e){return(0,R.jsx)(U.Z,{value:e,defaultChecked:e===t,children:e},e)}))})}})]}):r.acknowledgeStatus,ue=B.installationDate.includes(t.toLowerCase())?(0,R.jsx)(Z.Qr,{name:"installationDate",control:E,render:function(e){var t=e.field,n=e.fieldState.error;return(0,R.jsx)(Y.Z,{sx:{width:"80%"},children:(0,R.jsx)(q.M,{label:"",value:t.value,onChange:function(e){t.onChange(e)},slotProps:{flex:1,textField:{fullWidth:!1,error:!!n,helperText:null===n||void 0===n?void 0:n.message}}})})}}):r.installationDate,de=B.installationStatus.includes(t.toLowerCase())?(0,R.jsxs)(M.Z,{sx:{flex:1,flexShrink:0,width:{xs:3,md:"80%"}},children:[(0,R.jsx)(z.Z,{}),(0,R.jsx)(Z.Qr,{name:"installationStatus",control:E,render:function(e){var t=e.field;return(0,R.jsx)(G.Z,{value:t.value,onChange:function(e){t.onChange(e)},input:(0,R.jsx)(Q.Z,{label:""}),renderValue:function(e){return e},sx:{textTransform:"capitalize",fullWidth:!0},children:$().map((function(e,t){return(0,R.jsx)(U.Z,{value:e,children:e},t)}))})}})]}):r.installationStatus,xe=B.collectionSource.includes(t.toLowerCase())?(0,R.jsxs)(M.Z,{sx:{flex:1,flexShrink:0,width:{xs:3,md:"80%"}},children:[(0,R.jsx)(z.Z,{}),(0,R.jsx)(Z.Qr,{name:"collectionSource",control:E,render:function(e){var t=e.field;return(0,R.jsx)(G.Z,{value:t.value,onChange:function(e){t.onChange(e),function(e){D([]),T([]),F("claimStatus"),F("claimsDetailStatus");var t=j.filter((function(t){return t.value===e.target.value}))[0].id;D(p.filter((function(e){return e.parentId===t}))),_("claimStatus",C[0].value),H(C[0].value)}(e)},input:(0,R.jsx)(Q.Z,{label:""}),renderValue:function(e){return e},sx:{textTransform:"capitalize",fullWidth:!0},children:j.map((function(e,t){return(0,R.jsx)(U.Z,{value:e.value,children:e.value},t)}))})}})]}):r.collectionSource,he=B.claimStatus.includes(t.toLowerCase())?(0,R.jsxs)(M.Z,{sx:{flex:1,flexShrink:0,width:{xs:3,md:"80%"}},children:[(0,R.jsx)(z.Z,{}),(0,R.jsx)(Z.Qr,{name:"claimStatus",control:E,render:function(e){var t=e.field;return(0,R.jsx)(G.Z,{value:t.value,onChange:function(e){t.onChange(e),function(e){var t=C.filter((function(t){return t.value===e.target.value}))[0].id;T(p.filter((function(e){return e.parentId===t}))),F("claimsDetailStatus")}(e)},input:(0,R.jsx)(Q.Z,{label:""}),renderValue:function(e){return e},sx:{textTransform:"capitalize",fullWidth:!0},children:C.map((function(e,t){return(0,R.jsx)(U.Z,{value:e.value,children:e.value},t)}))})}})]}):r.claimStatus,pe=B.claimsDetailStatus.includes(t.toLowerCase())?(0,R.jsxs)(M.Z,{sx:{flex:1,flexShrink:0,width:{xs:3,md:"80%"}},children:[(0,R.jsx)(z.Z,{}),(0,R.jsx)(Z.Qr,{name:"claimsDetailStatus",control:E,render:function(e){var t=e.field;return(0,R.jsx)(G.Z,{value:t.value,onChange:function(e){t.onChange(e),console.log(W)},input:(0,R.jsx)(Q.Z,{label:""}),renderValue:function(e){return e},sx:{textTransform:"capitalize",fullWidth:!0},children:I.map((function(e,t){return(0,R.jsx)(U.Z,{value:e.value,children:e.value},t)}))})}})]}):r.claimsDetailStatus,fe=(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(O.Z,{variant:"h6",gutterBottom:!0,children:"Notes"}),(0,R.jsx)(ie.Z,{sx:{overflow:"unset",mt:5},children:(0,R.jsx)(le.Z,{children:(0,R.jsxs)(ee.Z,{sx:{minWidth:960},children:[(0,R.jsx)(ne.Z,{children:(0,R.jsxs)(te.Z,{children:[(0,R.jsx)(re.Z,{width:40,children:"#"}),(0,R.jsx)(re.Z,{sx:{typography:"subtitle2"},children:"Note"})]})}),(0,R.jsx)(oe.Z,{children:null===r||void 0===r?void 0:r.notes.map((function(e,t){return(0,R.jsxs)(te.Z,{children:[(0,R.jsx)(re.Z,{children:t+1}),(0,R.jsx)(re.Z,{children:(0,R.jsx)(O.Z,{variant:"subtitle2",children:e.noteText})})]},t)}))})]})})})]}),ve=(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(O.Z,{variant:"h6",gutterBottom:!0,children:"Attachments"}),(0,R.jsx)(ie.Z,{sx:{overflow:"unset",mt:5},children:(0,R.jsx)(le.Z,{children:(0,R.jsxs)(ee.Z,{sx:{minWidth:960},children:[(0,R.jsx)(ne.Z,{children:(0,R.jsxs)(te.Z,{children:[(0,R.jsx)(re.Z,{width:40,children:"#"}),(0,R.jsx)(re.Z,{sx:{typography:"subtitle2"},children:"Name"})]})}),(0,R.jsx)(oe.Z,{children:null===r||void 0===r?void 0:r.attachments.map((function(e,t){return(0,R.jsxs)(te.Z,{children:[(0,R.jsx)(re.Z,{children:t+1}),(0,R.jsx)(re.Z,{children:(0,R.jsxs)(O.Z,{variant:"subtitle2",children:[" ",(0,R.jsx)("a",{target:"_blank",rel:"noreferrer",href:e.attachmentPath,children:e.fileName})," "]})})]},t)}))})]})})})]}),me=(0,R.jsxs)(ae.Z,{container:!0,children:[(0,R.jsxs)(ae.Z,{xs:12,md:9,sx:{py:3},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",children:"NOTES"}),(0,R.jsx)(O.Z,{variant:"body2",children:"We appreciate your business. Should you need us to add VAT or extra notes let us know!"})]}),(0,R.jsxs)(ae.Z,{xs:12,md:3,sx:{py:3,textAlign:"right"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",children:"Have a Question?"}),(0,R.jsx)(O.Z,{variant:"body2",children:"support@minimals.cc"})]})]});(0,V.ZP)(te.Z)((function(e){var t=e.theme;return{"& td":{textAlign:"right",borderBottom:"none",paddingTop:t.spacing(1),paddingBottom:t.spacing(1)}}}));return(0,R.jsxs)(b.Z,{sx:{pt:5,px:5},children:[(0,R.jsxs)(Y.Z,{rowGap:5,display:"grid",alignItems:"center",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,R.jsx)(Y.Z,{component:"img",alt:"logo",src:"/logo/logo_single.svg",sx:{width:48,height:48}}),(0,R.jsx)(y.Z,{spacing:1,alignItems:{xs:"flex-start",md:"flex-end"},children:(0,R.jsx)(se.Z,{variant:"soft",color:"default",children:null===r||void 0===r?void 0:r.department})}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Issue Date:"}),null===r||void 0===r?void 0:r.issueInvoiceDate]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Amount"}),null===r||void 0===r?void 0:r.invoiceAmount]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Currency"}),null===r||void 0===r?void 0:r.currency]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Customer Code"}),null===r||void 0===r?void 0:r.customerCode]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Name English"}),null===r||void 0===r?void 0:r.customerNameEn]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Name Arabic"}),null===r||void 0===r?void 0:r.customerNameEn]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Po Number"}),null===r||void 0===r?void 0:r.customerPO]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"PO Value"}),null===r||void 0===r?void 0:r.poValue]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Region"}),null===r||void 0===r?void 0:r.region]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Contract Number"}),null===r||void 0===r?void 0:r.contractNo]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Delivery Date"}),J]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Installation Date"}),ue]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Department"}),X]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Installation Status"}),de]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Days To Collected"}),null===r||void 0===r?void 0:r.daysToCollected]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Acknowledge Status"}),ce]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Collection Source"}),xe]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Claim Status"}),he]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Claims Detail Status"}),pe]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Sales Confirm"}),null===r||void 0===r?void 0:r.salesConfirm]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Created By"}),null===r||void 0===r?void 0:r.createdBy]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Sales Taker"}),null===r||void 0===r?void 0:r.salesTakerName]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2"},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Collector Name"}),null===r||void 0===r?void 0:r.collectorName]}),(0,R.jsxs)(y.Z,{sx:{typography:"body2",mb:3},children:[(0,R.jsx)(O.Z,{variant:"subtitle2",sx:{mb:1},children:"Responsible Engineer Name"}),null===r||void 0===r?void 0:r.responsibleEngineerName]})]}),fe,(0,R.jsx)(A.Z,{sx:{mt:5,borderStyle:"dashed",mb:3}}),ve,(0,R.jsx)(A.Z,{sx:{mt:5,borderStyle:"dashed"}}),me]})}var ue=function(e){return[e.toLocaleString("default",{year:"numeric"}),e.toLocaleString("default",{month:"2-digit"}),e.toLocaleString("default",{day:"2-digit"})].join("-")};function de(e){var t=e.currentInvoice,n=(0,o.tv)(),r=((0,T.k)(),(0,T.k)()),c=(0,l.useState)(!1),u=(0,s.Z)(c,2),d=(u[0],u[1]),h=(0,l.useState)(!1),p=(0,s.Z)(h,2),A=p[0],E=p[1],P=(0,l.useState)(""),O=(0,s.Z)(P,2),F=O[0],_=O[1];console.log(t.department);var W=(0,I.j)().map((function(e){return e.toLocaleLowerCase()})).indexOf(null===t||void 0===t?void 0:t.department.toLowerCase()),V=function(){E(!1)},q={deliveryDate:["operation"],department:["operation","sales","tenderandcontracts"],acknowledgeStatuses:["operation","sales"],installationStatus:["installation"],installationDate:["installation"],collectionSource:["collection"],claimStatus:["collection"],claimsDetailStatus:["collection"]},z=m.Ry().shape({CreateNote:m.Z_(),department:m.Z_(),acknowledgeStatus:m.Z_(),DeliveryDate:m.nK().nullable(),installationStatus:m.Z_(),installationDate:m.nK().nullable(),collectionSource:m.Z_(),claimStatus:m.Z_(),claimsDetailStatus:m.Z_()}),M=(0,l.useMemo)((function(){return{CreateNote:(null===t||void 0===t?void 0:t.CreateNote)||"",department:(null===t||void 0===t?void 0:t.department)||"",acknowledgeStatus:(null===t||void 0===t?void 0:t.acknowledgeStatus)||"",DeliveryDate:(null===t||void 0===t?void 0:t.DeliveryDate)||new Date,installationStatus:(null===t||void 0===t?void 0:t.installationStatus)||"",installationDate:(null===t||void 0===t?void 0:t.installationDate)||new Date,collectionSource:(null===t||void 0===t?void 0:t.CollectionSource)||"",claimStatus:(null===t||void 0===t?void 0:t.ClaimStatus)||"",claimsDetailStatus:(null===t||void 0===t?void 0:t.ClaimsDetailStatus)||""}}),[t]),Q=(0,l.useState)(M),U=(0,s.Z)(Q,2),G=U[0],H=U[1],J=(0,Z.cI)({resolver:(0,j.X)(z),defaultValues:M}),K=J.reset,X=J.watch,$=J.handleSubmit,Y=J.formState.isSubmitting,ee=(0,l.useCallback)((function(e,t){H((function(n){return(0,v.Z)((0,v.Z)({},n),{},(0,f.Z)({},e,t))}))}),[]),te=$(function(){var e=(0,i.Z)((0,a.Z)().mark((function e(o){var i,s,l,c,u,h,p,f,v,m,Z,j,g;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(),console.log("File uploaded"),console.log("Data:",o),r.onTrue(),e.prev=4,e.next=7,new Promise((function(e){return setTimeout(e,500)}));case 7:i=X(),s=i.CreateNote,l=i.department,c=i.acknowledgeStatus,u=i.DeliveryDate,h=i.installationDate,p=i.installationStatus,f=i.collectionSource,v=i.claimStatus,m=i.claimsDetailStatus,Z=[],l&&q.department.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/department",value:"".concat(l)}),c&&q.acknowledgeStatuses.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/acknowledgeStatus",value:"".concat(c)}),u&&q.deliveryDate.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/DeliveryDate",value:"".concat(ue(u))}),h&&q.installationDate.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/DeliveryDate",value:"".concat(ue(h))}),p&&q.installationStatus.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/InstallationDate",value:"".concat(p)}),f&&q.collectionSource.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/CollectionSource",value:"".concat(f)}),v&&q.claimStatus.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/ClaimStatus",value:"".concat(v)}),m&&q.claimsDetailStatus.includes(t.department.toLowerCase())&&Z.push({op:"replace",path:"/ClaimsDetailStatus",value:"".concat(m)}),Z.push({op:"add",path:"/CreateNote",value:{NoteText:"".concat(s)}}),K(),j=(0,x.iJ)(W),console.log("Body",JSON.stringify(Z)),g=(0,x.kT)(W,t.id),console.log("Url",g),fetch(g,{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(Z),Cache:"default"}).then((function(e){if(!e.ok){if(400===e.status)return e.text().then((function(e){throw _(e),E(!0),new Error("Bad Request: ".concat(e))}));throw new Error("Network response was not ok")}return e.text()})).then((function(e){d(!0),r.onFalse(),n.replace(j),console.log("res:",e)})).catch((function(e){console.error("Fetch Error:",e)})),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(4),console.error("Error:",e.t0),r.onFalse();case 30:case"end":return e.stop()}}),e,null,[[4,26]])})));return function(t){return e.apply(this,arguments)}}()),ne=function(){var e=new FormData,n=document.querySelector("#file").files[0];if(n){e.append("file",n);try{var r=(0,x.ZN)(t.id);console.log("Url",r),fetch(r,{mode:"cors",method:"POST",headers:{Accept:"application/json"},body:e,Cache:"default"}).then(function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,3e3)}));case 2:if(t.ok){e.next=9;break}if(400!==t.status&&415!==t.status){e.next=8;break}return e.next=6,t.text();case 6:throw n=e.sent,new Error("Bad Request: ".concat(n));case 8:throw new Error("Network response was not ok");case 9:return e.abrupt("return",t.text());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){})).catch((function(e){console.error("Fetch Error:",e)}))}catch(o){console.log(o)}}};return(0,R.jsxs)(L.ZP,{methods:J,onSubmit:te,children:[(0,R.jsxs)(b.Z,{children:[(0,R.jsx)(B,{currentInvoice:t}),(0,R.jsx)(ce,{currentInvoice:t,filters:G,onFilters:ee,departmentOptions:(0,I.j)().map((function(e){return e})),department:t.department})]}),(0,R.jsx)(y.Z,{justifyContent:"flex-end",direction:"row",spacing:2,sx:{mt:3},children:(0,R.jsxs)(g.Z,{size:"large",variant:"contained",loading:r.value&&Y,type:"submit",children:[t?"Update":"Create"," & Send"]})}),(0,R.jsxs)(w.Z,{open:A,color:"#ef5350",keepMounted:!0,onClose:V,"aria-describedby":"alert-dialog-slide-description",className:"dialog-error",children:[(0,R.jsx)(N.Z,{children:"Error"}),(0,R.jsx)(D.Z,{children:(0,R.jsx)(k.Z,{id:"alert-dialog-slide-description",children:String(F)})}),(0,R.jsx)(C.Z,{children:(0,R.jsx)(S.Z,{onClick:V,children:"Ok"})})]})]})}n(10826);function xe(e){var t=e.id,n=(0,h.K$)(),r=(0,l.useState)(null),o=(0,s.Z)(r,2),f=o[0],v=o[1],m=(0,l.useState)(!0),Z=(0,s.Z)(m,2),j=Z[0],g=Z[1];return(0,l.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.Ag)(t);case 3:n=e.sent,v(n),console.log(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching invoice:",e.t0);case 11:return e.prev=11,g(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),j||!f?(0,R.jsx)(u.Z,{}):(0,R.jsxs)(c.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,R.jsx)(p.Z,{heading:"Edit invoice",links:[{name:"Dashboard",href:d.H.dashboard.root},{name:"Invoice",href:d.H.dashboard.invoice.root},{name:"New Invoice"}],sx:{mb:{xs:3,md:5}}}),(0,R.jsx)(de,{currentInvoice:f})]})}function he(){var e=(0,o.UO)(),t=e.id;return console.log(e),(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(r.ql,{children:(0,R.jsx)("title",{children:" Edit invoice"})}),(0,R.jsx)(xe,{id:t})]})}},51691:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(63366),o=n(87462),a=n(72791),i=n(59278),s=n(94419),l=n(66934),c=n(31402),u=n(4567),d=n(75878),x=n(21217);function h(e){return(0,x.Z)("MuiDialogContentText",e)}(0,d.Z)("MuiDialogContentText",["root"]);var p=n(80184),f=["children","className"],v=(0,l.ZP)(u.Z,{shouldForwardProp:function(e){return(0,l.FO)(e)||"classes"===e},name:"MuiDialogContentText",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),m=a.forwardRef((function(e,t){var n=(0,c.Z)({props:e,name:"MuiDialogContentText"}),a=n.className,l=(0,r.Z)(n,f),u=function(e){var t=e.classes,n=(0,s.Z)({root:["root"]},h,t);return(0,o.Z)({},t,n)}(l);return(0,p.jsx)(v,(0,o.Z)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:l,className:(0,i.Z)(u.root,a)},n,{classes:u}))}))},65661:function(e,t,n){var r=n(87462),o=n(63366),a=n(72791),i=n(59278),s=n(94419),l=n(4567),c=n(66934),u=n(31402),d=n(17673),x=n(85090),h=n(80184),p=["className","id"],f=(0,c.ZP)(l.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,t){return t.root}})({padding:"16px 24px",flex:"0 0 auto"}),v=a.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiDialogTitle"}),l=n.className,c=n.id,v=(0,o.Z)(n,p),m=n,Z=function(e){var t=e.classes;return(0,s.Z)({root:["root"]},d.a,t)}(m),j=a.useContext(x.Z).titleId,g=void 0===j?c:j;return(0,h.jsx)(f,(0,r.Z)({component:"h2",className:(0,i.Z)(Z.root,l),ownerState:m,ref:t,variant:"h6",id:null!=c?c:g},v))}));t.Z=v}}]);
//# sourceMappingURL=2435.47637fdd.chunk.js.map