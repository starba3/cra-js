"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[6632],{20302:function(e,n,t){t.d(n,{JL:function(){return a},PH:function(){return c},Ze:function(){return l}});var r=t(93433),s=t(74165),o=t(15861);function a(){return i.apply(this,arguments)}function i(){return(i=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("https://invoicecollectionsystemapi.azurewebsites.net/customer",{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return u.apply(this,arguments)}function u(){return(u=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{id:"0",customerCode:"All",customerNameEn:"All",customerNameAr:"All"}],e.next=3,fetch("https://invoicecollectionsystemapi.azurewebsites.net/customer",{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n.push.apply(n,(0,r.Z)(e))})).catch((function(e){return console.log()}));case 3:return console.log("List: ".list),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return d.apply(this,arguments)}function d(){return(d=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("https://invoicecollectionsystemapi.azurewebsites.net/api/User/UsersNameByRole/sales",{mode:"cors"}).then((function(e){return e.json()})).then((function(e){n=e})).catch((function(e){return console.log()}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},46626:function(e,n,t){t.a(e,(async function(e,r){try{t.d(n,{Z:function(){return z}});var s=t(4942),o=t(1413),a=t(74165),i=t(15861),c=t(29439),u=t(72791),l=t(69931),d=t(57621),f=t(79836),h=t(89164),p=t(53382),m=t(39281),x=t(36314),Z=t(94721),g=t(5849),w=t(38072),v=t(19208),j=t(57689),b=t(27216),y=(t(83854),t(47974)),C=t(60720),P=t(50933),D=t(1382),S=t(91617),k=t(41557),R=t(62633),E=t(20302),F=t(10370),N=t(3827),I=t(50313),L=t(80184),O={name:"",service:[],paidStatus:[],status:"all",startDate:null,endDate:null},A=await(0,S.qL)();function z(){var e=(0,C.K$)(),n=(0,v.tv)(),t=(0,D.x6)({defaultOrderBy:"issueInvoiceDate"}),r=(0,j.s0)(),S=(0,l.nt)().t,_=function(e){return S(e)},z=(0,u.useState)(A),B=(0,c.Z)(z,2),H=B[0],q=B[1],U=(0,u.useState)(O),G=(0,c.Z)(U,2),J=G[0],K=G[1],Q=(0,u.useState)(""),T=(0,c.Z)(Q,2),V=(T[0],T[1],(0,u.useState)(!1)),$=(0,c.Z)(V,2),M=($[0],$[1],(0,u.useState)(0)),X=(0,c.Z)(M,2);X[0],X[1];(0,u.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,E.JL)();case 3:n=e.sent,q(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching customers:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var Y=[{id:"customerCode",label:_("customerCode")},{id:"customerNameEn",label:_("customerNameEn")},{id:"customerNameAr",label:_("customerNameAr")}],ee=!(!J.startDate||!J.endDate)&&J.startDate.getTime()>J.endDate.getTime(),ne=W({inputData:H,comparator:(0,D.sQ)(t.order,t.orderBy),filters:J,dateError:ee}),te=ne.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage),re=t.dense?56:76,se=!!J.name||!!J.service.length||"all"!==J.status||!!J.startDate&&!!J.endDate,oe=!ne.length&&se||!ne.length,ae=(0,u.useCallback)((function(e,n){t.onResetPage(),K((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,s.Z)({},e,n))}))}),[t]),ie=(0,u.useCallback)((function(e){var n=H.filter((function(n){return n.id!==e}));q(n),t.onUpdatePageDeleteRow(te.length)}),[te.length,t,H]),ce=(0,u.useCallback)((function(e){n.push(w.H.dashboard.invoice.edit(e))}),[n]),ue=(0,u.useCallback)((function(e){n.push(w.H.dashboard.invoice.details(e))}),[n]),le=(0,u.useCallback)((function(){K(O)}),[]);return(0,L.jsxs)(h.Z,{maxWidth:!e.themeStretch&&"lg",children:[(0,L.jsx)(P.Z,{heading:"List",links:[{name:_("app"),href:w.H.dashboard.root},{name:_("customer")},{name:_("list")}],action:(0,L.jsx)(x.Z,{direction:"row",divider:(0,L.jsx)(Z.Z,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:(0,L.jsx)(g.Z,{onClick:function(){return r(w.H.customers.create)},variant:"contained",startIcon:(0,L.jsx)(b.Z,{icon:"mingcute:add-line"}),children:_("newCustomer")})}),sx:{mb:{xs:3,md:5}}}),(0,L.jsxs)(d.Z,{children:[(0,L.jsx)(I.Z,{filters:J,onFilters:ae,dateError:ee,serviceOptions:(0,k.b)().map((function(e){return e})),paidStatusOptions:(0,R.O)().map((function(e){return e}))}),se&&(0,L.jsx)(F.Z,{filters:J,onFilters:ae,onResetFilters:le,results:ne.length,sx:{p:2.5,pt:0}}),(0,L.jsx)(m.Z,{sx:{position:"relative",overflow:"unset"},children:(0,L.jsx)(y.Z,{children:(0,L.jsxs)(f.Z,{size:t.dense?"small":"medium",sx:{minWidth:800},children:[(0,L.jsx)(D.K,{order:t.order,orderBy:t.orderBy,headLabel:Y,rowCount:H.length,numSelected:t.selected.length,onSort:t.onSort}),(0,L.jsxs)(p.Z,{children:[ne.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map((function(e){return(0,L.jsx)(N.Z,{row:e,selected:t.selected.includes(e.id),onSelectRow:function(){return t.onSelectRow(e.id)},onViewRow:function(){return ue(e.id)},onEditRow:function(){return ce(e.id)},onDeleteRow:function(){return ie(e.id)},handleOpenInquiry:function(){return console.log(e.id)}},e.id)})),(0,L.jsx)(D.$W,{height:re,emptyRows:(0,D.fQ)(t.page,t.rowsPerPage,H.length)}),(0,L.jsx)(D.et,{notFound:oe})]})]})})}),(0,L.jsx)(D.S_,{count:ne.length,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})]})}function W(e){var n=e.inputData,t=e.comparator,r=e.filters.name,s=n.map((function(e,n){return[e,n]}));return s.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n=s.map((function(e){return e[0]})),r&&(n=n.filter((function(e){return-1!==e.customerNameEn.toLowerCase().indexOf(r.toLowerCase())||-1!==e.customerNameAr.indexOf(r.toLowerCase())}))),n}r()}catch(_){r(_)}}),1)},3827:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(9195),s=t(68745),o=t(22459),a=t(52115),i=t(80184);function c(e){var n=e.row,t=(e.selected,e.onSelectRow,e.onViewRow,e.onEditRow,e.onDeleteRow,e.handleOpenInquiry,n.id,n.customerCode),c=n.customerNameEn,u=n.customerNameAr;(0,o.k)(),(0,a.S)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(r.Z,{hover:!0,children:[(0,i.jsx)(s.Z,{children:t}),(0,i.jsx)(s.Z,{children:c}),(0,i.jsx)(s.Z,{children:u})]})})}},50313:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(72791),s=t(69931),o=t(36314),a=t(48550),i=t(63466),c=t(27216),u=t(52115),l=t(80184);function d(e){var n,t=e.filters,d=e.onFilters,f=(e.dateError,e.serviceOptions,e.paidStatusOptions,(0,u.S)(),(0,r.useCallback)((function(e){d("name",e.target.value)}),[d])),h=(0,s.nt)().t;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(o.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:(0,l.jsx)(o.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:(0,l.jsx)(a.Z,{fullWidth:!0,value:t.name,onChange:f,placeholder:(n="searchCustomerName",h(n)),InputProps:{startAdornment:(0,l.jsx)(i.Z,{position:"start",children:(0,l.jsx)(c.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})})})}},56632:function(e,n,t){t.a(e,(async function(e,r){try{t.r(n),t.d(n,{default:function(){return u}});var s=t(6907),o=t(46626),a=t(80184),i=e([o]);function u(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.ql,{children:(0,a.jsx)("title",{children:" Customers List"})}),(0,a.jsx)(o.Z,{})]})}o=(i.then?(await i)():i)[0],r()}catch(c){r(c)}}))},10370:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(1413),s=t(45987),o=t(64554),a=t(85771),i=t(27938),c=t(5849),u=t(36314),l=t(27216),d=t(25265),f=t(80184),h=["filters","onFilters","onResetFilters","results"],p=["label","children","sx"];function m(e){var n=e.filters,t=e.onFilters,i=e.onResetFilters,p=e.results,m=(0,s.Z)(e,h),Z=(0,d.l2)(n.startDate,n.endDate);return(0,f.jsxs)(u.Z,(0,r.Z)((0,r.Z)({spacing:1.5},m),{},{children:[(0,f.jsxs)(o.Z,{sx:{typography:"body2"},children:[(0,f.jsx)("strong",{children:p}),(0,f.jsx)(o.Z,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),(0,f.jsxs)(u.Z,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!n.service.length&&(0,f.jsx)(x,{label:"Service:",children:n.service.map((function(e){return(0,f.jsx)(a.Z,{label:e,size:"small",onDelete:function(){return function(e){var r=n.service.filter((function(n){return n!==e}));t("service",r)}(e)}},e)}))}),"all"!==n.status&&(0,f.jsx)(x,{label:"Status:",children:(0,f.jsx)(a.Z,{size:"small",label:n.status,onDelete:function(){t("status","all")}})}),n.startDate&&n.endDate&&(0,f.jsx)(x,{label:"Date:",children:(0,f.jsx)(a.Z,{size:"small",label:Z,onDelete:function(){t("startDate",null),t("endDate",null)}})}),(0,f.jsx)(c.Z,{color:"error",onClick:i,startIcon:(0,f.jsx)(l.Z,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]}))}function x(e){var n=e.label,t=e.children,a=e.sx,c=(0,s.Z)(e,p);return(0,f.jsxs)(u.Z,(0,r.Z)((0,r.Z)({component:i.Z,variant:"outlined",spacing:1,direction:"row",sx:(0,r.Z)({p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed"},a)},c),{},{children:[(0,f.jsx)(o.Z,{component:"span",sx:{typography:"subtitle2"},children:n}),(0,f.jsx)(u.Z,{spacing:1,direction:"row",flexWrap:"wrap",children:t})]}))}}}]);
//# sourceMappingURL=6632.eba6d406.chunk.js.map